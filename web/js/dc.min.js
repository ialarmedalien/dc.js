/*!
 *  dc 3.0.6
 *  http://dc-js.github.io/dc.js/
 *  Copyright 2012-2016 Nick Zhu & the dc.js Developers
 *  https://github.com/dc-js/dc.js/blob/master/AUTHORS
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

!function(){function t(t,e){"use strict";function n(t){return!!(t&&t._groups&&t._parents)}var r={version:"3.0.6",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};r.chartRegistry=function(){function t(t){return t||(t=r.constants.DEFAULT_CHART_GROUP),e[t]||(e[t]=[]),t}var e={};return{has:function(t){for(var n in e)if(e[n].indexOf(t)>=0)return!0;return!1},register:function(n,r){r=t(r),e[r].push(n)},deregister:function(n,r){r=t(r);for(var i=0;i<e[r].length;i++)if(e[r][i].anchorName()===n.anchorName()){e[r].splice(i,1);break}},clear:function(t){t?delete e[t]:e={}},list:function(n){return n=t(n),e[n]}}}(),r.registerChart=function(t,e){r.chartRegistry.register(t,e)},r.deregisterChart=function(t,e){r.chartRegistry.deregister(t,e)},r.hasChart=function(t){return r.chartRegistry.has(t)},r.deregisterAllCharts=function(t){r.chartRegistry.clear(t)},r.filterAll=function(t){for(var e=r.chartRegistry.list(t),n=0;n<e.length;++n)e[n].filterAll()},r.refocusAll=function(t){for(var e=r.chartRegistry.list(t),n=0;n<e.length;++n)e[n].focus&&e[n].focus()},r.renderAll=function(t){for(var e=r.chartRegistry.list(t),n=0;n<e.length;++n)e[n].render();null!==r._renderlet&&r._renderlet(t)},r.redrawAll=function(t){for(var e=r.chartRegistry.list(t),n=0;n<e.length;++n)e[n].redraw();null!==r._renderlet&&r._renderlet(t)},r.disableTransitions=!1,r.transition=function(t,e,n,i){if(r.disableTransitions||e<=0)return t;var a=t.transition(i);return(e>=0||void 0!==e)&&(a=a.duration(e)),(n>=0||void 0!==n)&&(a=a.delay(n)),a},r.optionalTransition=function(t,e,n,i){return t?function(t){return r.transition(t,e,n,i)}:function(t){return t}},r.afterTransition=function(t,e){if(t.empty()||!t.duration)e.call(t);else{var n=0;t.each(function(){++n}).on("end",function(){--n||e.call(t)})}},r.units={},r.units.integers=function(t,e){return Math.abs(e-t)},r.units.ordinal=function(){throw new Error("dc.units.ordinal should not be called - it is a placeholder")},r.units.fp={},r.units.fp.precision=function(t){var e=function(t,n){var i=Math.abs((n-t)/e.resolution);return r.utils.isNegligible(i-Math.floor(i))?Math.floor(i):Math.ceil(i)};return e.resolution=t,e},r.round={},r.round.floor=function(t){return Math.floor(t)},r.round.ceil=function(t){return Math.ceil(t)},r.round.round=function(t){return Math.round(t)},r.override=function(t,e,n){var r=t[e];t["_"+e]=r,t[e]=n},r.renderlet=function(t){return arguments.length?(r._renderlet=t,r):r._renderlet},r.instanceOfChart=function(t){return t instanceof Object&&t.__dcFlag__&&!0},r.errors={},r.errors.Exception=function(t){var e=t||"Unexpected internal error";this.message=e,this.toString=function(){return e},this.stack=(new Error).stack},r.errors.Exception.prototype=Object.create(Error.prototype),r.errors.Exception.prototype.constructor=r.errors.Exception,r.errors.InvalidStateException=function(){r.errors.Exception.apply(this,arguments)},r.errors.InvalidStateException.prototype=Object.create(r.errors.Exception.prototype),r.errors.InvalidStateException.prototype.constructor=r.errors.InvalidStateException,r.errors.BadArgumentException=function(){r.errors.Exception.apply(this,arguments)},r.errors.BadArgumentException.prototype=Object.create(r.errors.Exception.prototype),r.errors.BadArgumentException.prototype.constructor=r.errors.BadArgumentException,r.dateFormat=t.timeFormat("%m/%d/%Y"),r.printers={},r.printers.filters=function(t){for(var e="",n=0;n<t.length;++n)n>0&&(e+=", "),e+=r.printers.filter(t[n]);return e},r.printers.filter=function(t){var e="";return void 0!==t&&null!==t&&(t instanceof Array?t.length>=2?e="["+t.map(function(t){return r.utils.printSingleValue(t)}).join(" -> ")+"]":t.length>=1&&(e=r.utils.printSingleValue(t[0])):e=r.utils.printSingleValue(t)),e},r.pluck=function(t,e){return e?function(n,r){return e.call(n,n[t],r)}:function(e){return e[t]}},r.utils={},r.utils.printSingleValue=function(t){var e=""+t;return t instanceof Date?e=r.dateFormat(t):"string"==typeof t?e=t:r.utils.isFloat(t)?e=r.utils.printSingleValue.fformat(t):r.utils.isInteger(t)&&(e=Math.round(t)),e},r.utils.printSingleValue.fformat=t.format(".2f"),r.utils.toTimeFunc=function(t){return"time"+t.charAt(0).toUpperCase()+t.slice(1)},r.utils.add=function(e,n,i){if("string"==typeof n&&(n=n.replace("%","")),e instanceof Date)return"string"==typeof n&&(n=+n),"millis"===i?new Date(e.getTime()+n):("function"!=typeof(i=i||t.timeDay)&&(i=t[r.utils.toTimeFunc(i)]),i.offset(e,n));if("string"==typeof n){var a=+n/100;return e>0?e*(1+a):e*(1-a)}return e+n},r.utils.subtract=function(e,n,i){if("string"==typeof n&&(n=n.replace("%","")),e instanceof Date)return"string"==typeof n&&(n=+n),"millis"===i?new Date(e.getTime()-n):("function"!=typeof(i=i||t.timeDay)&&(i=t[r.utils.toTimeFunc(i)]),i.offset(e,-n));if("string"==typeof n){var a=+n/100;return e<0?e*(1+a):e*(1-a)}return e-n},r.utils.isNumber=function(t){return t===+t},r.utils.isFloat=function(t){return t===+t&&t!==(0|t)},r.utils.isInteger=function(t){return t===+t&&t===(0|t)},r.utils.isNegligible=function(t){return!r.utils.isNumber(t)||t<r.constants.NEGLIGIBLE_NUMBER&&t>-r.constants.NEGLIGIBLE_NUMBER},r.utils.clamp=function(t,e,n){return t<e?e:t>n?n:t},r.utils.constant=function(t){return function(){return t}};var i=0;r.utils.uniqueId=function(){return++i},r.utils.nameToId=function(t){return t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},r.utils.appendOrSelect=function(t,e,n){n=n||e;var r=t.select(e);return r.empty()&&(r=t.append(n)),r},r.utils.safeNumber=function(t){return r.utils.isNumber(+t)?+t:0},r.utils.arraysEqual=function(t,e){return!t&&!e||!(!t||!e)&&(t.length===e.length&&t.every(function(t,n){return t.valueOf()===e[n].valueOf()}))},r.utils.allChildren=function(t){var e=[];if(e.push(t.path),console.log("currentNode",t),t.children)for(var n=0;n<t.children.length;n++)e=e.concat(r.utils.allChildren(t.children[n]));return e},r.utils.toHierarchy=function(t,e){for(var n={key:"root",children:[]},r=0;r<t.length;r++)for(var i=t[r],a=i.key,o=e(i),l=n,c=0;c<a.length;c++){var u,s=a.slice(0,c+1),d=l.children,f=a[c];c+1<a.length?(void 0===(u=function(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n]}(d,f))&&(u={key:f,children:[],path:s},d.push(u)),l=u):(u={key:f,value:o,data:i,path:s},d.push(u))}return n},r.utils.getAncestors=function(t){for(var e=[],n=t;n.parent;)e.unshift(n.name),n=n.parent;return e},r.utils.arraysIdentical=function(t,e){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0},r.logger=function(){var t={};t.enableDebugLog=!1,t.warn=function(e){return console&&(console.warn?console.warn(e):console.log&&console.log(e)),t};var e={};return t.warnOnce=function(n){return e[n]||(e[n]=!0,r.logger.warn(n)),t},t.debug=function(e){return t.enableDebugLog&&console&&(console.debug?console.debug(e):console.log&&console.log(e)),t},t.deprecate=function(e,n){var r=!1;return function(){return r||(t.warn(n),r=!0),e.apply(this,arguments)}},t}(),r.config=function(){var t={},e=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"],n=e;return t.defaultColors=function(i){return arguments.length?(n=i,t):(n===e&&r.logger.warnOnce("You are using d3.schemeCategory20c, which has been removed in D3v5. See the explanation at https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50. DC is using it for backward compatibility, however it will be changed in DCv3.1. You can change it by calling dc.config.defaultColors(newScheme). See https://github.com/d3/d3-scale-chromatic for some alternatives."),n)},t}(),r.events={current:null},r.events.trigger=function(t,e){e?(r.events.current=t,setTimeout(function(){t===r.events.current&&t()},e)):t()},r.filters={},r.filters.RangedFilter=function(t,e){var n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<this[1]},n.filterType="RangedFilter",n},r.filters.TwoDimensionalFilter=function(t){if(null===t)return null;var e=t;return e.isFiltered=function(t){return t.length&&t.length===e.length&&t[0]===e[0]&&t[1]===e[1]},e.filterType="TwoDimensionalFilter",e},r.filters.RangedTwoDimensionalFilter=function(t){if(null===t)return null;var e,n=t;return e=n[0]instanceof Array?[[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1])],[Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]]:[[t[0],-1/0],[t[1],1/0]],n.isFiltered=function(t){var n,r;return t instanceof Array?(n=t[0],r=t[1]):(n=t,r=e[0][1]),n>=e[0][0]&&n<e[1][0]&&r>=e[0][1]&&r<e[1][1]},n.filterType="RangedTwoDimensionalFilter",n},r.filters.HierarchyFilter=function(t){if(null===t)return null;var e=t.slice(0);return e.isFiltered=function(t){if(!(e.length&&t&&t.length&&t.length>=e.length))return!1;for(var n=0;n<e.length;n++)if(t[n]!==e[n])return!1;return!0},e},r.baseMixin=function(n){function i(){s&&(k?s.attr("viewBox")||s.attr("viewBox","0 0 "+n.width()+" "+n.height()):s.attr("width",n.width()).attr("height",n.height()))}function a(t){if(!n[t]||!n[t]())throw new r.errors.InvalidStateException("Mandatory attribute chart."+t+" is missing on chart[#"+n.anchorName()+"]")}n.__dcFlag__=r.utils.uniqueId();var o,l,c,u,s,d,f,h,g,p,y,x=200,v=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().width;return e&&e>x?e:x},m=v,A=200,b=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().height;return e&&e>A?e:A},_=b,k=!1,D=r.pluck("key"),C=r.pluck("value"),M=r.pluck("key"),w=r.pluck("key"),L=!1,E=function(t){return n.keyAccessor()(t)+": "+n.valueAccessor()(t)},R=!0,S=!1,O=750,B=0,F=r.printers.filters,T=["dimension","group"],N=r.constants.DEFAULT_CHART_GROUP,H=t.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),P=[],G=function(t,e){return 0===e.length?t.filter(null):1!==e.length||e[0].isFiltered?1===e.length&&"RangedFilter"===e[0].filterType?t.filterRange(e[0]):t.filterFunction(function(t){for(var n=0;n<e.length;n++){var r=e[n];if(r.isFiltered&&r.isFiltered(t))return!0;if(r<=t&&r>=t)return!0}return!1}):t.filterExact(e[0]),e},z=function(t){return t.all()};n.height=function(t){return arguments.length?(_=t?"function"==typeof t?t:r.utils.constant(t):b,h=void 0,n):(r.utils.isNumber(h)||(h=_(u.node())),h)},n.width=function(t){return arguments.length?(m=t?"function"==typeof t?t:r.utils.constant(t):v,f=void 0,n):(r.utils.isNumber(f)||(f=m(u.node())),f)},n.minWidth=function(t){return arguments.length?(x=t,n):x},n.minHeight=function(t){return arguments.length?(A=t,n):A},n.useViewBoxResizing=function(t){return arguments.length?(k=t,n):k},n.dimension=function(t){return arguments.length?(o=t,n.expireCache(),n):o},n.data=function(t){return arguments.length?(z="function"==typeof t?t:r.utils.constant(t),n.expireCache(),n):z.call(n,l)},n.group=function(t,e){return arguments.length?(l=t,n._groupName=e,n.expireCache(),n):l},n.ordering=function(t){return arguments.length?(w=t,g=e.quicksort.by(w),n.expireCache(),n):w},n._computeOrderedGroups=function(t,n){var r=t.slice(0),i=g;return r.length<=1?r:(2===arguments.length?i=e.quicksort.by(n):1!==arguments.length||g||(i=e.quicksort.by(ordering)),i(r,0,r.length))},n.filterAll=function(){return n.filter(null)},n.select=function(t){return u.select(t)},n.selectAll=function(t){return u?u.selectAll(t):null},n.anchor=function(e,i){if(!arguments.length)return c;if(r.instanceOfChart(e))c=e.anchor(),u=e.root(),d=!0;else{if(!e)throw new r.errors.BadArgumentException("parent must be defined");c=e.select&&e.classed?e.node():e,(u=t.select(c)).classed(r.constants.CHART_CLASS,!0),r.registerChart(n,i),d=!1}return N=i,n},n.anchorName=function(){var t=n.anchor();return t&&t.id?t.id:t&&t.replace?t.replace("#",""):"dc-chart"+n.chartID()},n.root=function(t){return arguments.length?(u=t,n):u},n.svg=function(t){return arguments.length?(s=t,n):s},n.resetSvg=function(){return n.select("svg").remove(),s=n.root().append("svg"),i(),s},n.filterPrinter=function(t){return arguments.length?(F=t,n):F},n.controlsUseVisibility=function(t){return arguments.length?(S=t,n):S},n.turnOnControls=function(){if(u){var t=n.controlsUseVisibility()?"visibility":"display";n.selectAll(".reset").style(t,null),n.selectAll(".filter").text(F(n.filters())).style(t,null)}return n},n.turnOffControls=function(){if(u){var t=n.controlsUseVisibility()?"visibility":"display",e=n.controlsUseVisibility()?"hidden":"none";n.selectAll(".reset").style(t,e),n.selectAll(".filter").style(t,e).text(n.filter())}return n},n.transitionDuration=function(t){return arguments.length?(O=t,n):O},n.transitionDelay=function(t){return arguments.length?(B=t,n):B},n._mandatoryAttributes=function(t){return arguments.length?(T=t,n):T},n.render=function(){h=f=void 0,H.call("preRender",n,n),T&&T.forEach(a);var t=n._doRender();return p&&p.render(),n._activateRenderlets("postRender"),t},n._activateRenderlets=function(t){H.call("pretransition",n,n),n.transitionDuration()>0&&s?s.transition().duration(n.transitionDuration()).delay(n.transitionDelay()).on("end",function(){H.call("renderlet",n,n),t&&H.call(t,n,n)}):(H.call("renderlet",n,n),t&&H.call(t,n,n))},n.redraw=function(){i(),H.call("preRedraw",n,n);var t=n._doRedraw();return p&&p.render(),n._activateRenderlets("postRedraw"),t},n.commitHandler=function(t){return arguments.length?(y=t,n):y},n.redrawGroup=function(){return y?y(!1,function(t,e){t?console.log(t):r.redrawAll(n.chartGroup())}):r.redrawAll(n.chartGroup()),n},n.renderGroup=function(){return y?y(!1,function(t,e){t?console.log(t):r.renderAll(n.chartGroup())}):r.renderAll(n.chartGroup()),n},n._invokeFilteredListener=function(t){void 0!==t&&H.call("filtered",n,n,t)},n._invokeZoomedListener=function(){H.call("zoomed",n,n)};var I=function(t,e){return null===e||void 0===e?t.length>0:t.some(function(t){return e<=t&&e>=t})};n.hasFilterHandler=function(t){return arguments.length?(I=t,n):I},n.hasFilter=function(t){return I(P,t)};var U=function(t,e){for(var n=0;n<t.length;n++)if(t[n]<=e&&t[n]>=e){t.splice(n,1);break}return t};n.removeFilterHandler=function(t){return arguments.length?(U=t,n):U};var V=function(t,e){return t.push(e),t};n.addFilterHandler=function(t){return arguments.length?(V=t,n):V};var Y=function(t){return[]};return n.resetFilterHandler=function(t){return arguments.length?(Y=t,n):Y},n.replaceFilter=function(t){return P=Y(P),n.filter(t),n},n.filter=function(t){if(!arguments.length)return P.length>0?P[0]:null;var e=P;return t instanceof Array&&t[0]instanceof Array&&!t.isFiltered?t[0].forEach(function(t){e=I(e,t)?U(e,t):V(e,t)}):e=null===t?Y(e):I(e,t)?U(e,t):V(e,t),P=function(t){if(n.dimension()&&n.dimension().filter){var e=G(n.dimension(),t);e&&(t=e)}return t}(e),n._invokeFilteredListener(t),null!==u&&n.hasFilter()?n.turnOnControls():n.turnOffControls(),n},n.filters=function(){return P},n.highlightSelected=function(e){t.select(e).classed(r.constants.SELECTED_CLASS,!0),t.select(e).classed(r.constants.DESELECTED_CLASS,!1)},n.fadeDeselected=function(e){t.select(e).classed(r.constants.SELECTED_CLASS,!1),t.select(e).classed(r.constants.DESELECTED_CLASS,!0)},n.resetHighlight=function(e){t.select(e).classed(r.constants.SELECTED_CLASS,!1),t.select(e).classed(r.constants.DESELECTED_CLASS,!1)},n.onClick=function(t){var e=n.keyAccessor()(t);r.events.trigger(function(){n.filter(e),n.redrawGroup()})},n.filterHandler=function(t){return arguments.length?(G=t,n):G},n._doRender=function(){return n},n._doRedraw=function(){return n},n.legendables=function(){return[]},n.legendHighlight=function(){},n.legendReset=function(){},n.legendToggle=function(){},n.isLegendableHidden=function(){return!1},n.keyAccessor=function(t){return arguments.length?(D=t,n):D},n.valueAccessor=function(t){return arguments.length?(C=t,n):C},n.label=function(t,e){return arguments.length?(M=t,(void 0===e||e)&&(L=!0),n):M},n.renderLabel=function(t){return arguments.length?(L=t,n):L},n.title=function(t){return arguments.length?(E=t,n):E},n.renderTitle=function(t){return arguments.length?(R=t,n):R},n.renderlet=r.logger.deprecate(function(t){return n.on("renderlet."+r.utils.uniqueId(),t),n},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),n.chartGroup=function(t){return arguments.length?(d||r.deregisterChart(n,N),N=t,d||r.registerChart(n,N),n):N},n.expireCache=function(){return n},n.legend=function(t){return arguments.length?((p=t).parent(n),n):p},n.chartID=function(){return n.__dcFlag__},n.options=function(t){var e=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var i in t)"function"==typeof n[i]?t[i]instanceof Array&&-1!==e.indexOf(i)?n[i].apply(n,t[i]):n[i].call(n,t[i]):r.logger.debug("Not a valid option setter name: "+i);return n},n.on=function(t,e){return H.on(t,e),n},n},r.marginMixin=function(t){var e={top:10,right:50,bottom:30,left:30};return t.margins=function(n){return arguments.length?(e=n,t):e},t.effectiveWidth=function(){return t.width()-t.margins().left-t.margins().right},t.effectiveHeight=function(){return t.height()-t.margins().top-t.margins().bottom},t.hasMargins=function(){return 0!==e.top||0!==e.bottom||0!==e.left||0!==e.right},t},r.colorMixin=function(e){var n=t.scaleOrdinal(r.config.defaultColors()),i=!0,a=function(t){return e.keyAccessor()(t)};return e.colors=function(i){return arguments.length?(n=i instanceof Array?t.scaleQuantize().range(i):"function"==typeof i?i:r.utils.constant(i),e):n},e.ordinalColors=function(n){return e.colors(t.scaleOrdinal().range(n))},e.linearColors=function(n){return e.colors(t.scaleLinear().range(n).interpolate(t.interpolateHcl))},e.colorAccessor=function(t){return arguments.length?(a=t,i=!1,e):a},e.defaultColorAccessor=function(){return i},e.colorDomain=function(t){return arguments.length?(n.domain(t),e):n.domain()},e.calculateColorDomain=function(){var r=[t.min(e.data(),e.colorAccessor()),t.max(e.data(),e.colorAccessor())];return n.domain(r),e},e.getColor=function(t,e){return n(a.call(this,t,e))},e.colorCalculator=r.logger.deprecate(function(t){return arguments.length?(e.getColor=t,e):e.getColor},"colorMixin.colorCalculator has been deprecated. Please colorMixin.colors and colorMixin.colorAccessor instead"),e},r.coordinateGridMixin=function(e){function n(n,i){e.isOrdinal()?(x.bandwidth||(r.logger.warn("For compatibility with d3v4+, dc.js d3.0 ordinal bar/line/bubble charts need d3.scaleBand() for the x scale, instead of d3.scaleOrdinal(). Replacing .x() with a d3.scaleBand with the same domain - make the same change in your code to avoid this warning!"),x=t.scaleBand().domain(x.domain())),(e.elasticX()||0===x.domain().length)&&x.domain(e._ordinalXDomain())):e.elasticX()&&x.domain([e.xAxisMin(),e.xAxisMax()]);var a=x.domain();!i&&r.utils.arraysEqual(b,a)||e.rescale(),b=a,e.isOrdinal()?x.range([0,e.xAxisLength()]).paddingInner($).paddingOuter(e._useOuterPadding()?Q:0):x.range([0,e.xAxisLength()]),E=E.scale(e.x()),function(t){var n=t.select("g."+f);if(V){n.empty()&&(n=t.insert("g",":first-child").attr("class",d+" "+f).attr("transform","translate("+e.margins().left+","+e.margins().top+")"));var i=E.tickValues()?E.tickValues():"function"==typeof x.ticks?x.ticks.apply(x,E.tickArguments()):x.domain(),a=n.selectAll("line").data(i),o=a.enter().append("line").attr("x1",function(t){return x(t)}).attr("y1",e._xAxisY()-e.margins().top).attr("x2",function(t){return x(t)}).attr("y2",0).attr("opacity",0);r.transition(o,e.transitionDuration(),e.transitionDelay()).attr("opacity",1);var l=o.merge(a);r.transition(l,e.transitionDuration(),e.transitionDelay()).attr("x1",function(t){return x(t)}).attr("y1",e._xAxisY()-e.margins().top).attr("x2",function(t){return x(t)}).attr("y2",0),a.exit().remove()}else n.selectAll("line").remove()}(n)}function i(){return tt?t.axisRight():t.axisLeft()}function a(){return e.anchorName().replace(/[ .#=\[\]"]/g,"-")+"-clip"}function o(){var t=r.utils.appendOrSelect(g,"defs"),n=a(),i=r.utils.appendOrSelect(t,"#"+n,"clipPath").attr("id",n),o=2*J;r.utils.appendOrSelect(i,"rect").attr("width",e.xAxisLength()+o).attr("height",e.yAxisHeight()+o).attr("transform","translate(-"+J+", -"+J+")")}function l(t){e.isOrdinal()&&(z=!1),n(e.g(),t),e._prepareYAxis(e.g()),e.plotData(),(e.elasticX()||Y||t)&&e.renderXAxis(e.g()),(e.elasticY()||Y||t)&&e.renderYAxis(e.g()),t?e.renderBrush(e.g(),!1):e.redrawBrush(e.filter(),Y),e.fadeDeselectedArea(e.filter()),Y=!1}function c(t,n){var i;!function(t){return t instanceof Array&&t.length>1}(t)?(e.x().domain(m),i=null):(e.x().domain(t),i=r.filters.RangedFilter(t[0],t[1])),e.replaceFilter(i),e.rescale(),e.redraw(),n||(w&&!r.utils.arraysEqual(e.filter(),w.filter())&&r.events.trigger(function(){w.replaceFilter(i),w.redraw()}),e._invokeZoomedListener(),r.events.trigger(function(){e.redrawGroup()},r.constants.EVENT_DELAY))}function u(){j&&j.transform(e.root(),function(e,n,r){var i=(n[1]-n[0])/(e[1]-e[0]),a=-1*r(e[0]);return t.zoomIdentity.scale(i).translate(a,0)}(e.x().domain(),m,v))}function s(t,e){return t&&2===t.length&&e&&2===e.length?((t[0]>e[1]||t[1]<e[0])&&console.warn("Could not intersect extents, will reset"),[t[0]>e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1]]):t}var d="grid-line",f="vertical",h="custom-brush-handle";(e=r.colorMixin(r.marginMixin(r.baseMixin(e)))).colors(t.scaleOrdinal(t.schemeCategory10)),e._mandatoryAttributes().push("x");var g,p,y,x,v,m,A,b,_,k,D,C,M,w,L,E=t.axisBottom(),R=r.units.integers,S=0,O=t.timeDay,B=!1,F=0,T=null,N=0,H=!1,P=0,G=t.brushX(),z=!0,I=!1,U=!1,V=!1,Y=!1,W=[1,1/0],X=!0,j=t.zoom().on("zoom",function(){if(t.event.sourceEvent&&(!t.event.sourceEvent.type||-1===["start","zoom","end"].indexOf(t.event.sourceEvent.type))){var n=t.event.transform.rescaleX(v).domain();e.focus(n,!1)}}),q=t.zoom().on("zoom",null),K=!1,Z=!1,J=0,Q=.5,$=0,tt=!1;return e.rescale=function(){return M=void 0,Y=!0,e},e.resizing=function(){return Y},e.rangeChart=function(t){return arguments.length?((w=t).focusChart(e),e):w},e.zoomScale=function(t){return arguments.length?(W=t,e):W},e.zoomOutRestrict=function(t){return arguments.length?(X=t,e):X},e._generateG=function(t){g=void 0===t?e.svg():t;var n=window.location.href.split("#")[0];return p=g.append("g"),y=p.append("g").attr("class","chart-body").attr("transform","translate("+e.margins().left+", "+e.margins().top+")").attr("clip-path","url("+n+"#"+a()+")"),p},e.g=function(t){return arguments.length?(p=t,e):p},e.mouseZoomable=function(t){return arguments.length?(Z=t,e):Z},e.chartBodyG=function(t){return arguments.length?(y=t,e):y},e.x=function(t){return arguments.length?(x=t,m=x.domain(),e.rescale(),e):x},e.xOriginalDomain=function(){return m},e.xUnits=function(t){return arguments.length?(R=t,e):R},e.xAxis=function(t){return arguments.length?(E=t,e):E},e.elasticX=function(t){return arguments.length?(B=t,e):B},e.xAxisPadding=function(t){return arguments.length?(S=t,e):S},e.xAxisPaddingUnit=function(t){return arguments.length?(O=t,e):O},e.xUnitCount=function(){return void 0===M&&(e.isOrdinal()?M=e.x().domain().length:(M=e.xUnits()(e.x().domain()[0],e.x().domain()[1]))instanceof Array&&(M=M.length)),M},e.useRightYAxis=function(t){return arguments.length?(tt!==t&&T&&r.logger.warn("Value of useRightYAxis has been altered, after yAxis was created. You might get unexpected yAxis behavior. Make calls to useRightYAxis sooner in your chart creation process."),tt=t,e):tt},e.isOrdinal=function(){return e.xUnits()===r.units.ordinal},e._useOuterPadding=function(){return!0},e._ordinalXDomain=function(){return e._computeOrderedGroups(e.data()).map(e.keyAccessor())},e.renderXAxis=function(t){var n=t.select("g.x");n.empty()&&(n=t.append("g").attr("class","axis x").attr("transform","translate("+e.margins().left+","+e._xAxisY()+")"));var i=t.select("text.x-axis-label");i.empty()&&e.xAxisLabel()&&(i=t.append("text").attr("class","x-axis-label").attr("transform","translate("+(e.margins().left+e.xAxisLength()/2)+","+(e.height()-F)+")").attr("text-anchor","middle")),e.xAxisLabel()&&i.text()!==e.xAxisLabel()&&i.text(e.xAxisLabel()),r.transition(n,e.transitionDuration(),e.transitionDelay()).attr("transform","translate("+e.margins().left+","+e._xAxisY()+")").call(E),r.transition(i,e.transitionDuration(),e.transitionDelay()).attr("transform","translate("+(e.margins().left+e.xAxisLength()/2)+","+(e.height()-F)+")")},e._xAxisY=function(){return e.height()-e.margins().bottom},e.xAxisLength=function(){return e.effectiveWidth()},e.xAxisLabel=function(t,n){return arguments.length?(A=t,e.margins().bottom-=F,F=void 0===n?12:n,e.margins().bottom+=F,e):A},e._prepareYAxis=function(n){if(void 0===_||e.elasticY()){void 0===_&&(_=t.scaleLinear());var r=e.yAxisMin()||0,a=e.yAxisMax()||0;_.domain([r,a]).rangeRound([e.yAxisHeight(),0])}_.range([e.yAxisHeight(),0]),T||(T=i()),T.scale(_),e._renderHorizontalGridLinesForAxis(n,_,T)},e.renderYAxisLabel=function(t,n,i,a){a=a||P;var o=e.g().select("text.y-axis-label."+t+"-label"),l=e.margins().top+e.yAxisHeight()/2;o.empty()&&n&&(o=e.g().append("text").attr("transform","translate("+a+","+l+"),rotate("+i+")").attr("class","y-axis-label "+t+"-label").attr("text-anchor","middle").text(n)),n&&o.text()!==n&&o.text(n),r.transition(o,e.transitionDuration(),e.transitionDelay()).attr("transform","translate("+a+","+l+"),rotate("+i+")")},e.renderYAxisAt=function(t,n,i){var a=e.g().select("g."+t);a.empty()&&(a=e.g().append("g").attr("class","axis "+t).attr("transform","translate("+i+","+e.margins().top+")")),r.transition(a,e.transitionDuration(),e.transitionDelay()).attr("transform","translate("+i+","+e.margins().top+")").call(n)},e.renderYAxis=function(){var t=tt?e.width()-e.margins().right:e._yAxisX();e.renderYAxisAt("y",T,t);var n=tt?e.width()-P:P,r=tt?90:-90;e.renderYAxisLabel("y",e.yAxisLabel(),r,n)},e._renderHorizontalGridLinesForAxis=function(t,n,i){var a=t.select("g.horizontal");if(U){var o=i.tickValues()?i.tickValues():n.ticks?n.ticks.apply(n,i.tickArguments()):n.domain();a.empty()&&(a=t.insert("g",":first-child").attr("class",d+" horizontal").attr("transform","translate("+e.margins().left+","+e.margins().top+")"));var l=a.selectAll("line").data(o),c=l.enter().append("line").attr("x1",1).attr("y1",function(t){return n(t)}).attr("x2",e.xAxisLength()).attr("y2",function(t){return n(t)}).attr("opacity",0);r.transition(c,e.transitionDuration(),e.transitionDelay()).attr("opacity",1);var u=c.merge(l);r.transition(u,e.transitionDuration(),e.transitionDelay()).attr("x1",1).attr("y1",function(t){return n(t)}).attr("x2",e.xAxisLength()).attr("y2",function(t){return n(t)}),l.exit().remove()}else a.selectAll("line").remove()},e._yAxisX=function(){return e.useRightYAxis()?e.width()-e.margins().right:e.margins().left},e.yAxisLabel=function(t,n){return arguments.length?(k=t,e.margins().left-=P,P=void 0===n?12:n,e.margins().left+=P,e):k},e.y=function(t){return arguments.length?(_=t,e.rescale(),e):_},e.yAxis=function(t){return arguments.length?(T=t,e):(T||(T=i()),T)},e.elasticY=function(t){return arguments.length?(H=t,e):H},e.renderHorizontalGridLines=function(t){return arguments.length?(U=t,e):U},e.renderVerticalGridLines=function(t){return arguments.length?(V=t,e):V},e.xAxisMin=function(){var n=t.min(e.data(),function(t){return e.keyAccessor()(t)});return r.utils.subtract(n,S,O)},e.xAxisMax=function(){var n=t.max(e.data(),function(t){return e.keyAccessor()(t)});return r.utils.add(n,S,O)},e.yAxisMin=function(){var n=t.min(e.data(),function(t){return e.valueAccessor()(t)});return r.utils.subtract(n,N)},e.yAxisMax=function(){var n=t.max(e.data(),function(t){return e.valueAccessor()(t)});return r.utils.add(n,N)},e.yAxisPadding=function(t){return arguments.length?(N=t,e):N},e.yAxisHeight=function(){return e.effectiveHeight()},e.round=function(t){return arguments.length?(C=t,e):C},e._rangeBandPadding=function(t){return arguments.length?($=t,e):$},e._outerRangeBandPadding=function(t){return arguments.length?(Q=t,e):Q},r.override(e,"filter",function(t){return arguments.length?(e._filter(t),e.redrawBrush(t,!1),e):e._filter()}),e.brush=function(t){return arguments.length?(G=t,e):G},e.renderBrush=function(t,n){z&&(G.on("start brush end",e._brushing),D=t.append("g").attr("class","brush").attr("transform","translate("+e.margins().left+","+e.margins().top+")"),e.setBrushExtents(),e.createBrushHandlePaths(D,n),e.redrawBrush(e.filter(),n))},e.createBrushHandlePaths=function(t){var n=t.selectAll("path."+h).data([{type:"w"},{type:"e"}]);(n=n.enter().append("path").attr("class",h).merge(n)).attr("d",e.resizeHandlePath)},e.extendBrush=function(t){return t&&e.round()&&(t[0]=e.round()(t[0]),t[1]=e.round()(t[1])),t},e.brushIsEmpty=function(t){return!t||t[1]<=t[0]},e._brushing=function(){if(t.event.sourceEvent&&(!t.event.sourceEvent.type||-1===["start","brush","end"].indexOf(t.event.sourceEvent.type))){var n=t.event.selection;n&&(n=n.map(e.x().invert)),n=e.extendBrush(n),e.redrawBrush(n,!1);var i=e.brushIsEmpty(n)?null:r.filters.RangedFilter(n[0],n[1]);r.events.trigger(function(){e.applyBrushSelection(i)},r.constants.EVENT_DELAY)}},e.applyBrushSelection=function(t){e.replaceFilter(t),e.redrawGroup()},e.setBrushExtents=function(t){G.extent([[0,0],[e.effectiveWidth(),e.effectiveHeight()]]),D.call(G)},e.redrawBrush=function(t,n){if(z&&D)if(Y&&e.setBrushExtents(n),t){var i=[x(t[0]),x(t[1])],a=r.optionalTransition(n,e.transitionDuration(),e.transitionDelay())(D);a.call(G.move,i),a.selectAll("path."+h).attr("display",null).attr("transform",function(e,n){return"translate("+x(t[n])+", 0)"}).attr("d",e.resizeHandlePath)}else D.call(G.move,null),D.selectAll("path."+h).attr("display","none");e.fadeDeselectedArea(t)},e.fadeDeselectedArea=function(t){},e.resizeHandlePath=function(t){var n=+("e"===(t=t.type)),r=n?1:-1,i=e.effectiveHeight()/3;return"M"+.5*r+","+i+"A6,6 0 0 "+n+" "+6.5*r+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+n+" "+.5*r+","+2*i+"ZM"+2.5*r+","+(i+8)+"V"+(2*i-8)+"M"+4.5*r+","+(i+8)+"V"+(2*i-8)},e.clipPadding=function(t){return arguments.length?(J=t,e):J},e._preprocessData=function(){},e._doRender=function(){return e.resetSvg(),e._preprocessData(),e._generateG(),o(),l(!0),v=x.copy(),Z?e._enableMouseZoom():K&&e._disableMouseZoom(),e},e._doRedraw=function(){return e._preprocessData(),l(!1),o(),e},e._enableMouseZoom=function(){K=!0;var t=[[0,0],[e.effectiveWidth(),e.effectiveHeight()]];if(j.scaleExtent(W).extent(t).duration(e.transitionDuration()),X){var n=Math.max(W[0],1);j.translateExtent(t).scaleExtent([n,W[1]])}e.root().call(j),u()},e._disableMouseZoom=function(){e.root().call(q)},e.focus=function(t,e){X&&(t=s(t,m),w&&(t=s(t,w.x().domain()))),c(t,e),u()},e.refocused=function(){return!r.utils.arraysEqual(e.x().domain(),m)},e.focusChart=function(t){return arguments.length?(L=t,e.on("filtered.dcjs-range-chart",function(t){t.filter()?r.utils.arraysEqual(t.filter(),L.filter())||r.events.trigger(function(){L.focus(t.filter(),!0)}):r.events.trigger(function(){L.x().domain(L.xOriginalDomain(),!0)})}),e):L},e.brushOn=function(t){return arguments.length?(z=t,e):z},e.parentBrushOn=function(t){return arguments.length?(I=t,e):I},e.gBrush=function(){return D},e},r.stackMixin=function(e){function n(t,n){var i=t.accessor||e.valueAccessor();t.name=String(t.name||n);var a=t.group.all().map(function(n,r){return{x:e.keyAccessor()(n,r),y:t.hidden?null:i(n,r),data:n,layer:t.name,hidden:t.hidden}});t.domainValues=a.filter(function(){if(!e.x())return r.utils.constant(!0);var t=e.x().domain();if(e.isOrdinal())return function(){return!0};if(e.elasticX())return function(){return!0};return function(e){return e.x>=t[0]&&e.x<=t[t.length-1]}}()),t.values=e.evadeDomainFilter()?a:t.domainValues}function i(t){var e=c.map(r.pluck("name")).indexOf(t);return c[e]}function a(){var t=e.data().map(function(t){return t.domainValues});return Array.prototype.concat.apply([],t)}function o(t){return!t.hidden}var l=t.stack(),c=[],u={},s=!1,d=!1;return e.stack=function(t,n,r){if(!arguments.length)return c;arguments.length<=2&&(r=n);var i={group:t};return"string"==typeof n&&(i.name=n),"function"==typeof r&&(i.accessor=r),c.push(i),e},r.override(e,"group",function(t,n,r){return arguments.length?(c=[],u={},e.stack(t,n),r&&e.valueAccessor(r),e._group(t,n)):e._group()}),e.hidableStacks=function(t){return arguments.length?(s=t,e):s},e.hideStack=function(t){var n=i(t);return n&&(n.hidden=!0),e},e.showStack=function(t){var n=i(t);return n&&(n.hidden=!1),e},e.getValueAccessorByIndex=function(t){return c[t].accessor||e.valueAccessor()},e.yAxisMin=function(){var n=t.min(a(),function(t){return t.y<0?t.y+t.y0:t.y0});return r.utils.subtract(n,e.yAxisPadding())},e.yAxisMax=function(){var n=t.max(a(),function(t){return t.y>0?t.y+t.y0:t.y0});return r.utils.add(n,e.yAxisPadding())},e.xAxisMin=function(){var n=t.min(a(),r.pluck("x"));return r.utils.subtract(n,e.xAxisPadding(),e.xAxisPaddingUnit())},e.xAxisMax=function(){var n=t.max(a(),r.pluck("x"));return r.utils.add(n,e.xAxisPadding(),e.xAxisPaddingUnit())},r.override(e,"title",function(t,n){return t?"function"==typeof t?e._title(t):t===e._groupName&&"function"==typeof n?e._title(n):"function"!=typeof n?u[t]||e._title():(u[t]=n,e):e._title()}),e.stackLayout=function(t){return arguments.length?(l=t,e):l},e.evadeDomainFilter=function(t){return arguments.length?(d=t,e):d},e.data(function(){var t=c.filter(o);if(!t.length)return[];t.forEach(n);var r=t[0].values.map(function(e,n){var r={x:e.x};return t.forEach(function(t){r[t.name]=t.values[n].y}),r}),i=t.map(function(t){return t.name});return e.stackLayout().keys(i)(r).forEach(function(e,n){e.forEach(function(e,r){t[n].values[r].y0=e[0],t[n].values[r].y1=e[1]})}),t}),e._ordinalXDomain=function(){var t=a().map(r.pluck("data"));return e._computeOrderedGroups(t).map(e.keyAccessor())},e.colorAccessor(function(t){return this.layer||this.name||t.name||t.layer}),e.legendables=function(){return c.map(function(t,n){return{chart:e,name:t.name,hidden:t.hidden||!1,color:e.getColor.call(t,t.values,n)}})},e.isLegendableHidden=function(t){var e=i(t.name);return!!e&&e.hidden},e.legendToggle=function(t){s&&(e.isLegendableHidden(t)?e.showStack(t.name):e.hideStack(t.name),e.renderGroup())},e},r.capMixin=function(e){var n=1/0,i=!0,a="Others";e.ordering(function(t){return-t.value});var o=function(t){return-t.value},l=function(n,r){var i=t.sum(r,e.valueAccessor()),a=r.map(e.keyAccessor());return i>0?n.concat([{others:a,key:e.othersLabel(),value:i}]):n};return e.cappedKeyAccessor=function(t,n){return t.hasOwnProperty("others")?t.key:e.keyAccessor()(t,n)},e.cappedValueAccessor=function(t,n){return t.hasOwnProperty("others")?t.value:e.valueAccessor()(t,n)},e.data(function(t){if(n===1/0)return e._computeOrderedGroups(t.all());var r,a=t.all();if(a=e._computeOrderedGroups(a,o),n)if(i)r=a.slice(n),a=a.slice(0,n);else{var c=Math.max(0,a.length-n);r=a.slice(0,c),a=a.slice(c)}return l?l(a,r):a}),e.cap=function(t){return arguments.length?(n=t,e):n},e.takeFront=function(t){return arguments.length?(i=t,e):i},e.othersLabel=function(t){return arguments.length?(a=t,e):a},e.othersGrouper=function(t){return arguments.length?(l=t,e):l},r.override(e,"onClick",function(t){t.others&&e.filter([t.others]),e._onClick(t)}),e},r.bubbleMixin=function(e){var n=.3,i=10,a=!1,o=!1;e.BUBBLE_NODE_CLASS="node",e.BUBBLE_CLASS="bubble",e.MIN_RADIUS=10,(e=r.colorMixin(e)).renderLabel(!0),e.data(function(n){var r=n.all();if(a){var i=e.radiusValueAccessor();r.sort(function(e,n){return t.descending(i(e),i(n))})}return r});var l=t.scaleLinear().domain([0,100]),c=function(t){return t.r};e.r=function(t){return arguments.length?(l=t,e):l},e.elasticRadius=function(t){return arguments.length?(o=t,e):o},e.calculateRadiusDomain=function(){o&&e.r().domain([e.rMin(),e.rMax()])},e.radiusValueAccessor=function(t){return arguments.length?(c=t,e):c},e.rMin=function(){return t.min(e.data(),function(t){return e.radiusValueAccessor()(t)})},e.rMax=function(){return t.max(e.data(),function(t){return e.radiusValueAccessor()(t)})},e.bubbleR=function(t){var n=e.radiusValueAccessor()(t),r=e.r()(n);return(isNaN(r)||n<=0)&&(r=0),r};var u=function(t){return e.label()(t)},s=function(t){return e.bubbleR(t)>i},d=function(t){return s(t)?1:0},f=function(t){return s(t)?"all":"none"};e._doRenderLabel=function(t){if(e.renderLabel()){var n=t.select("text");n.empty()&&(n=t.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",e.onClick)),n.attr("opacity",0).attr("pointer-events",f).text(u),r.transition(n,e.transitionDuration(),e.transitionDelay()).attr("opacity",d)}},e.doUpdateLabels=function(t){if(e.renderLabel()){var n=t.select("text").attr("pointer-events",f).text(u);r.transition(n,e.transitionDuration(),e.transitionDelay()).attr("opacity",d)}};var h=function(t){return e.title()(t)};return e._doRenderTitles=function(t){if(e.renderTitle()){t.select("title").empty()&&t.append("title").text(h)}},e.doUpdateTitles=function(t){e.renderTitle()&&t.select("title").text(h)},e.sortBubbleSize=function(t){return arguments.length?(a=t,e):a},e.minRadius=function(t){return arguments.length?(e.MIN_RADIUS=t,e):e.MIN_RADIUS},e.minRadiusWithLabel=function(t){return arguments.length?(i=t,e):i},e.maxBubbleRelativeSize=function(t){return arguments.length?(n=t,e):n},e.fadeDeselectedArea=function(t){e.hasFilter()?e.selectAll("g."+e.BUBBLE_NODE_CLASS).each(function(t){e.isSelectedNode(t)?e.highlightSelected(this):e.fadeDeselected(this)}):e.selectAll("g."+e.BUBBLE_NODE_CLASS).each(function(){e.resetHighlight(this)})},e.isSelectedNode=function(t){return e.hasFilter(t.key)},e.onClick=function(t){var n=t.key;r.events.trigger(function(){e.filter(n),e.redrawGroup()})},e},r.pieChart=function(e,n){function i(){return t.pie().sort(null).value(a.cappedValueAccessor)}var a=r.pieTypeMixin(r.legendableMixin(r.capMixin(r.colorMixin(r.baseMixin({})))));return a.colorAccessor(a.cappedKeyAccessor),a.title(function(t){return a.cappedKeyAccessor(t)+": "+a.cappedValueAccessor(t)}),a.label(a.cappedKeyAccessor),a.tweenType="pie",a.slicesCap=a.cap,a.hasNoData=function(t){for(var e=0;e<t.length;e++)if(0!==a.cappedValueAccessor(t[e]))return!1;return!0},a.prepareData=function(t,e){return e?i()([{key:a.emptyTitle(),value:1,others:[a.emptyTitle()]}]):i()(t)},a.__clickHandler=function(t,e){a.onClick(t.data,e)},a.isSelectedElement=function(t){return a.hasFilter(a.cappedKeyAccessor(t.data))},a.anchor(e,n)},r.legendableMixin=function(e){function n(n,r){e.selectAll("g."+e.sliceCssClass).each(function(e){n.name===e.data.key&&t.select(this).classed("highlight",r)})}return e.legendablesData=function(t){return e.data()},e.legendables=function(){return e.legendablesData().map(function(t,n){var r={name:t.key,data:t.value,others:t.others,chart:e};return r.color=e.getColor(t,n),r}).sort(function(e,n){return t.ascending(e.name,n.name)})},e.legendHighlight=function(t){n(t,!0)},e.legendReset=function(t){n(t,!1)},e.legendToggle=function(t){e.onClick({key:t.name,others:t.others})},e},r.highlighterMixin=function(t){var e=[];return t._highlightableClasses=function(n){return arguments.length?(e=n,t):e},t._highlightElement=function(n,r){e.forEach(function(e){t.select(e+"._"+n).classed("highlight",r)})},t._highlightFilter=function(){t.hasFilter()?e.forEach(function(e){t.selectAll(e).each(function(e){t.isSelectedElement(e)?t.highlightSelected(this):t.fadeDeselected(this)})}):e.forEach(function(e){t.selectAll(e).each(function(){t.resetHighlight(this)})})},t},r.pieTypeMixin=function(e){function n(){e.setVariables();var n=W(),u=e.data(),s=e.hasNoData(u),d=e.prepareData(u,s);if(e.hasOwnProperty("nodes")&&(A=d[0]),y){y.classed(w,s);var f=y.select("g."+D).selectAll("g."+b).data(d),g=y.select("g."+C).selectAll("text."+_).data(d),p=y.select("g."+M).selectAll("polyline."+k).data(d),x=t.transition().duration(e.transitionDuration()).delay(e.transitionDelay());[f,g,p].forEach(function(t){!function(t){t.exit().remove()}(t)}),function(t,n,r,u,s){var d=t.enter().append("g").attr("class",i).append("path").on("click",e.hasOwnProperty("collapsible")&&e.collapsible()?h:U);c(d,u,s),e.renderTitle()&&a(d.append("title"));!function(t,n,r,i){if(e.renderLabel()){var a=t.enter().append("text").attr("class",function(t,e){var n=b+" "+_+" _"+e;return m&&(n+=" external"),n}).on("click",U).on("mouseover",function(t,n){e._highlightElement(n,!0)}).on("mouseout",function(t,n){e._highlightElement(n,!1)});o(a,r,i),m&&O&&l(n,r,i)}}(n,r,u,s)}(f,g,p,n,x),function(t,n,r,i,u){c(t.select("path"),i,u),e.renderTitle()&&a(t.select("title"));!function(t,n,r,i){e.renderLabel()&&(o(t,r,i),m&&O&&l(n,r,i))}(n,r,i,u)}(f,g,p,n,x),e._highlightFilter(),function(t){return r.transition(t,e.transitionDuration(),e.transitionDelay())}(y).attr("transform","translate("+e.cx()+","+e.cy()+")")}}function i(t,e){return b+" _"+e+(t.depth?" "+b+"-level-"+t.depth:"")}function a(t){t.text(function(t){return e.title()(t.data)})}function o(t,e,n){t.transition(n).attr("transform",function(t){return V(t,e)}).attr("text-anchor","middle").text(B)}function l(n,r,i){n=n.enter().append("polyline").attr("class",function(t,e){return k+" _"+e+" "+b}).on("click",U).on("mouseover",function(t,n){e._highlightElement(n,!0)}).on("mouseout",function(t,n){e._highlightElement(n,!1)}).merge(n);var a=q();n.transition(i).attrTween("points",function(e){var n={startAngle:H(e),endAngle:P(e)},i=t.interpolate(n,e);return this._current=i(0),function(t){var e=i(t);return[r.centroid(e),a.centroid(e)]}}).style("visibility",function(t){return t.height&&0!==t.height?"hidden":P(t)-H(t)<1e-4?"hidden":"visible"})}function c(t,e,n){t.transition(n).attr("fill",d).attrTween("d",G)}function u(t){var e=P(t)-H(t);return isNaN(e)||e<S}function s(t){return 0===e.cappedValueAccessor(t)}function d(t,n){return e.getColor(t.data,n)}function f(t,e){var n=t(e);return n.indexOf("NaN")>=0&&(n="M0,0"),n}function h(t){A=e.collapse(A.id===t.id?e.nodes[0]:t)}var g,p,y,x,v,m,A,b="pie-slice",_="pie-label",k="pie-path",D="pie-slice-group",C="pie-label-group",M="pie-path-group",w="empty-chart",L="empty",E=0,R=0,S=.5,O=!1;(e=r.highlighterMixin(e)._highlightableClasses(["g."+b])).sliceCssClass=b,e.renderLabel(!0),e.transitionDuration(350),e.transitionDelay(0),e._doRender=function(){return e.resetSvg(),"slice"===e.tweenType?(H=T,P=N,G=I,W=j,q=Z,B=F,V=Y,e.onClick=U):(G=z,W=X,q=K),(y=e.svg().append("g").attr("transform","translate("+e.cx()+","+e.cy()+")")).append("g").attr("class",D),y.append("g").attr("class",C),y.append("g").attr("class",M),n(),e},e._doRedraw=function(){return n(),e},e.setVariables=function(){var n=t.min([e.width(),e.height()])/2;g=p&&p<n?p:n,e.hasOwnProperty("_d3")&&e._d3.hasOwnProperty("scale")&&e._d3.scale.y.range([e.innerRadius(),e.radius()-e.externalRadiusPadding()])};var B=function(t){return!s(t.data)&&!u(t)||e.isSelectedElement(t)?e.label()(t.data):""},F=function(t){if(!e.isSelectedElement(t)){if(s(t))return"";if(u(t))return 0===t.height&&m?e.label()(t):""}return e.label()(t)};e.externalRadiusPadding=function(t){return arguments.length?(R=t,e):R},e.innerRadius=function(t){return arguments.length?(E=t,e):E},e.radius=function(t){return arguments.length?(p=t,e):p||g},e.cx=function(t){return arguments.length?(x=t,e):x||e.width()/2},e.cy=function(t){return arguments.length?(v=t,e):v||e.height()/2},e.minAngleForLabel=function(t){return arguments.length?(S=t,e):S},e.emptyTitle=function(t){return 0===arguments.length?L:(L=t,e)},e.externalLabels=function(t){return 0===arguments.length?m:(m=t||void 0,e)},e.drawPaths=function(t){return 0===arguments.length?O:(O=t,e)};var T=function(t){return t.x0},N=function(t){return t.x1},H=function(t){return t.startAngle},P=function(t){return t.endAngle},G=function(t){},z=function(e){e.innerRadius=E;var n=this._current;n=function(t){return!t||isNaN(H(t))||isNaN(P(t))}(n)?{startAngle:0,endAngle:0}:{startAngle:n.startAngle,endAngle:n.endAngle};var r=t.interpolate(n,e);return this._current=r(0),function(t){return f(W(),r(t))}},I=function(e){var n=this._current;(function(t){return!t||isNaN(t.x0)||isNaN(t.y0)})(n)&&(n={x0:0,x1:0,y0:0,y1:0});var r={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},i=t.interpolate(n,r);return this._current=i(0),function(t){return f(W(),Object.assign({},e,i(t)))}},U=function(t,n){y.attr("class")!==w&&e.__clickHandler(t,n)},V=function(e,n){var r;return r=m?t.arc().innerRadius(g-R+m).outerRadius(g-R+m).centroid(e):n.centroid(e),isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"},Y=function(e,n){var r;return r=m&&0===e.height?t.arc().innerRadius(g-R+m).outerRadius(g-R+m).centroid(e.hasOwnProperty("x0")?{startAngle:e.x1,endAngle:e.x0}:e):n.centroid(e),isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"},W=function(){},X=function(){return t.arc().innerRadius(E).outerRadius(g-R)},j=function(){return t.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,e._d3.scale.x(t.x0)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,e._d3.scale.x(t.x1)))}).innerRadius(function(t){return Math.max(0,e._d3.scale.y(t.y0))}).outerRadius(function(t){return Math.max(0,e._d3.scale.y(t.y1))})},q=function(){},K=function(){return t.arc().innerRadius(g-R).outerRadius(g-R+m)},Z=function(){return t.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,e._d3.scale.x(t.x0)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,e._d3.scale.x(t.x1)))}).innerRadius(g-R).outerRadius(g-R+m)};return e.collapse=function(n){var r=t.interpolate(e._d3.scale.x.domain(),[n.x0,n.x1]),i=t.interpolate(e._d3.scale.y.domain(),[n.y0,1]),a=t.interpolate(e._d3.scale.y.range(),[n.y0?20:e.innerRadius(),e.radius()-e.externalRadiusPadding()]);return e.svg().transition().tween("scale",function(){return function(t){e._d3.scale.x.domain(r(t)),e._d3.scale.y.domain(i(t)).range(a(t))}}).selectAll("path").attrTween("d",function(t){return function(e){return W()(t)}}),n},e},r.link={path:{direct:function(){return[]},l_shape:function(t,e,n,r){return[{x:n,y:e}]},l_shape_alt:function(t,e,n,r){return[{x:t,y:r}]},dogleg:function(t,e,n,r){return[{x:t,y:(e+r)/2},{x:(t+n)/2,y:(e+r)/2},{x:n,y:(e+r)/2}]},dogleg_alt:function(t,e,n,r){return[{x:(t+n)/2,y:e},{x:(t+n)/2,y:(e+r)/2},{x:(t+n)/2,y:r}]}},cartesian:{},radial:{}},Object.keys(r.link.path).forEach(function(e){r.link.cartesian[e]=function(){return t.mklink(function(t,n,i,a,o){var l=r.link.path[e](n,i,a,o);t.moveTo(n,i),l.forEach(function(e){t.lineTo(e.x,e.y)}),t.lineTo(a,o)})},r.link.radial[e]=function(){return t.mklink(function(n,i,a,o,l){var c=i===o?[]:r.link.path[e](i,a,o,l),u=t.pointRadial(i,a),s={x:i,y:a};n.moveTo(u[0],u[1]),c.push({x:o,y:l}),c.forEach(function(e,r){var i=t.pointRadial(e.x,e.y);e.x===s.x?n.lineTo(i[0],i[1]):n.arc(0,0,e.y,s.x-.5*Math.PI,e.x-.5*Math.PI,e.x>s.x?0:1),s={x:e.x,y:e.y}})})}}),r.diagonalMixin=function(e){return e.diagonal=function(n){if(0!==arguments.length){var i="cartesian";if("curved"!==n){e.radialLayout()&&(i="radial");try{return e.horizontalOrientation()?e._d3.diagonal=r.link[i][n]().x(function(t){return t.y}).y(function(t){return t.x}):e._d3.diagonal=r.link[i][n]().x(function(t){return t.x}).y(function(t){return t.y}),e}catch(t){console.error(t)}}return e.radialLayout()?e._d3.diagonal=function(e){return t.linkRadial().angle(function(t){return t.x}).radius(function(t){return t.y})(e)}:e.horizontalOrientation()?e._d3.diagonal=t.linkHorizontal().x(function(t){return t.y}).y(function(t){return t.x}):e._d3.diagonal=t.linkVertical().x(function(t){return t.x}).y(function(t){return t.y}),e}},e},r.layerMixin=function(t){return t._layers={},t.layer=function(e,n,r){var i;if(1===arguments.length)return this._layers[e];if(2===arguments.length){if(n instanceof l||void 0!==n.dataBind&&void 0!==n.insert)return n._chart=this,this._layers[e]=n,this._layers[e];o(!1,"When reattaching a layer, the second argument must be a layer")}return n._chart=this,i=new l(n,r),i.remove=function(){return delete t._layers[e],this},this._layers[e]=i,i},t.drawLayers=function(t){for(var e in this._layers)this._layers[e].draw(t)},t};var a=/^(enter|update|merge|exit)(:transition)?$/,o=function(t,e){if(!t)throw new Error("[d3.chart] "+e)},l=function(t,e){if(this._base=t,this._handlers={},e&&(this.dataBind=e.dataBind,this.insert=e.insert,"events"in e))for(var n in e.events)this.on(n,e.events[n])};return l.prototype.dataBind=function(){o(!1,"Layers must specify a `dataBind` method.")},l.prototype.insert=function(){o(!1,"Layers must specify an `insert` method.")},l.prototype.on=function(t,e,n){return n=n||{},o(a.test(t),"Unrecognized lifecycle event name specified to `Layer#on`: '"+t+"'."),t in this._handlers||(this._handlers[t]=[]),this._handlers[t].push({callback:e,chart:n.chart||null}),this},l.prototype.off=function(t,e){var n,r=this._handlers[t];if(o(a.test(t),"Unrecognized lifecycle event name specified to `Layer#off`: '"+t+"'."),!r)return this._base;if(1===arguments.length)return r.length=0,this._base;for(n=r.length-1;n>-1;--n)r[n].callback===e&&r.splice(n,1);return this},l.prototype.draw=function(t){var e,r,i,a,l,c,u,s,d;if(!(e=this.dataBind.call(this._base,t))||!n(e))throw"Invalid selection defined by `Layer#dataBind` method.";o(e.enter,"Layer selection not properly bound."),(r=e.enter())._chart=this._base._chart;for(var f=0,h=(i=[{name:"update",selection:e},{name:"exit",selection:e,method:e.exit},{name:"enter",selection:r,method:this.insert},{name:"merge",selection:r.merge(e)}]).length;f<h;++f)if(u=i[f].name,a=i[f].selection,"function"==typeof(l=i[f].method)&&(a=l.call(a,a)),!a.empty()){if(o(a&&n(a),"Invalid selection defined for '"+u+"' lifecycle event."),c=this._handlers[u])for(s=0,d=c.length;s<d;++s)console.log("running "+u),a._chart=c[s].chart||this._base._chart,c[s].callback.call(a);if((c=this._handlers[u+":transition"])&&c.length)for(a=a.transition(),s=0,d=c.length;s<d;++s)console.log("running "+u+":transition"),a._chart=c[s].chart||this._base._chart,c[s].callback.call(a)}},r.clusterTreeMixin=function(e){var n=0;return e._d3.transition=t.transition().duration(e.transitionDuration()).delay(e.transitionDelay()),e.layers.links=e.layers.base.append("g").classed("links",!0),e.layers.nodes=e.layers.base.append("g").classed("nodes",!0),e.layer("nodes",e.layers.nodes,{dataBind:function(t){return this.selectAll(".node").data(t.descendants(),function(t){return t._id||(t._id=++n)})},insert:function(){return this.append("g").classed("node",!0)},events:{update:function(){this.classed("expandable",function(t){return t._children})},enter:function(){this.classed("leaf",function(t){return!t.children}),this.classed("expandable",function(t){return t._children}),this.append("circle").attr("r",0),this.append("text").attr("dy",".35rem").text(function(t){return e.label()(t.data)}).style("fill-opacity",0),this.on("click",function(t){e.trigger("click:node",t)})},merge:function(){this.classed("leaf",function(t){return!t.children}),this.classed("expandable",function(t){return t._children})},"merge:transition":function(){this.select("circle").attr("r",e.nodeMarkerSize()||6),this.select("text").style("fill-opacity",1)},"exit:transition":function(){this(e._d3.transition).remove(),this.select("circle").attr("r",0),this.select("text").style("fill-opacity",0)}}}),e.layer("links",e.layers.links,{dataBind:function(t){return this.selectAll(".link").data(t.links(),function(t){return t.target._id})},insert:function(){return this.append("path").classed("link",!0)},events:{enter:function(){this.attr("d",function(t){var n={x:e.source.x0,y:e.source.y0};return e._d3.diagonal({source:n,target:n})})},"merge:transition":function(){this(e._d3.transition).attr("d",e._d3.diagonal)},"exit:transition":function(){this(e._d3.transition).attr("d",function(t){var n={x:e.source.x,y:e.source.y};return e._d3.diagonal({source:n,target:n})}).remove()}}}),e},r.clusterTreeCartesianMixin=function(t){return t.layers.nodes.on("enter",function(){this.attr("transform",function(e){return"translate("+t.source.y0+","+t.source.x0+")"}),this.select("text").attr("x",function(t){return t.children?-10:10}).attr("text-anchor",function(t){return t.children?"start":"end"})}),t.layers.nodes.on("merge:transition",function(){this.attr("transform",function(t){return"translate("+t.y+","+t.x+")"})}),t.layers.nodes.on("exit:transition",function(){this.attr("transform",function(e){return"translate("+t.source.y+","+t.source.x+")"})}),t},r.clusterTreeRadialMixin=function(t){return t.layers.nodes.on("enter",function(){this.attr("transform",function(e){return"rotate("+(t.source.x0-90)+")translate("+t.source.y0+")"}),this.select("text").attr("text-anchor",function(t){return t.x<180?"start":"end"}).attr("transform",function(t){return t.x<180?"translate(8)":"rotate(180)translate(-8)"})}),t.layers.nodes.on("merge:transition",function(){this(t._d3.transition).attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"})}),t.layers.nodes.on("exit:transition",function(){this.attr("transform",function(e){return"rotate("+(t.source.x-90)+")translate("+t.source.y+")"})}),t},r.orientationMixin=function(t){var e=!1;return t.horizontalOrientation=function(n){return arguments.length?(e=n,t):e},t},r.hierarchyMixin=function(t){return t=r.hierarchyDataMixin(r.hierarchyFilterMixin(r.hierarchyClickHandlerMixin(t)))},r.collapsibleMixin=function(t){var e=!1;return t.collapsible=function(n){return arguments.length?(e=n,t):e},t},r.hierarchyDataMixin=function(e){return e.prepareData=function(t,n){var r=e.stratify(t);return n?e.layoutData([],e.layout()):e.layoutData(r,e.layout())},e.layoutData=function(t,e){return e(t)},e.hasNoData=function(t){for(var n=0;n<t.length;n++)if(0!==e.valueAccessor()(t[n]))return!1;return!0},e.createMissingAncestors=function(t,e){for(var n=[],r=t.map(function(t){return{data:t,ix:e(t).join("\0")}}).sort(function(t,e){return t.ix===e.ix?0:t.ix>e.ix}).map(function(t){return t.data}),i={key:[]},a=0;a<r.length;a++){for(var o=r[a],l=0;l<o.key.length-1;l++)if(!i.key[l]||i.key[l]!==o.key[l]){for(var c=1;c<o.key.length-l;c++)n.push({key:o.key.slice(0,l+c)});break}i=r[a]}return n.concat(t)},e.stratify=function(n){var r=e.keyAccessor(),i=e.createMissingAncestors(n,r);try{return t.stratify().id(function(t){return r(t)}).parentId(function(t){return r(t).slice(0,-1)})(i)}catch(t){}try{return t.stratify().id(function(t){return["root"].concat(r(t))}).parentId(function(t){return 0===r(t).length?[]:["root"].concat(r(t).slice(0,-1))})(i.concat([{key:[]}]))}catch(t){console.log(t)}},e},r.hierarchyFilterMixin=function(t){return t.filterHandler(function(t,e){return 0===e.length?t.filter(null):t.filterFunction(function(t){for(var n=0;n<e.length;n++){var r=e[n];if(r.isFiltered&&r.isFiltered(t))return!0}return!1}),e}),t.isSelectedElement=function(e){return function(e){for(var n=0;n<t.filters().length;n++)if(t.filters()[n].isFiltered(e))return!0;return!1}(e.key)},t.filtersForPath=function(e){for(var n=r.filters.HierarchyFilter(e),i=[],a=0;a<t.filters().length;a++){var o=t.filters()[a];(o.isFiltered(e)||n.isFiltered(o))&&i.push(o)}return i},t.filterOnDatum=function(e){for(var n,i=e.key,a=r.filters.HierarchyFilter(i),o=t.filtersForPath(i),l=!1,c=o.length-1;c>=0;c--)n=o[c],r.utils.arraysIdentical(n,i)&&(l=!0),t.filter(o[c]);if(!l)return a},t},r.hierarchyClickHandlerMixin=function(t){return t.__clickHandler=function(e){var n=t.filterOnDatum(e);r.events.trigger(function(){void 0!==n&&t.filter(n),t.redrawGroup()})},t},r.partitionMixin=function(e){var n,i;return e.othersLabel([e.othersLabel()]),e.layout=function(){var e=t.partition();return n&&e.padding(n),i&&e.round(!0),e},e.layoutRound=function(t){return 0===arguments.length?i:(i=t,e)},e.layoutPadding=function(){return 0===arguments.length?n:(n=_,e)},e.legendablesData=function(){return e.nodes.slice(1)||e.data()},e.layoutData=function(n,r){var i=r(n.sum(function(t){try{return e._cappedValueAccessor(t)||0}catch(t){return 0}}).sort(function(n,r){return t.ascending(e.ordering()(n),e.ordering()(r))})).descendants().map(function(t){return t.key=t.data.key,t});return e.nodes=i,i},r.override(e,"cappedValueAccessor",function(t){try{var n=e._cappedValueAccessor(t);if(n)return n;throw"No value returned"}catch(e){return t.data&&t.data.key?t.value:0}}),r.override(e,"cappedKeyAccessor",function(t){var n=e._cappedKeyAccessor(t);return"string"==typeof n?[n]:n.length>1?n.slice(-1)[0]:0===n.length?"root":n[0]}),e},r.clusterSizingMixin=function(t){var e,n,r=2.5;return t.nodeSize=function(n){return 0===arguments.length?e:(e=n,t)},t.separation=function(e){return 0===arguments.length?n:(n=e,t)},t.nodeMarkerSize=function(e){return 0===arguments.length?r:(r=e,t)},t},r.radialLayoutMixin=function(t){var e=!1;return t.radialLayout=function(n){return arguments.length?(e=n,t):e},t},r.clusterChart=function(e,n){function i(t,e){f.attr("class")!==b&&d.__clickHandler(t,e)}function a(){var e=D.filter(C),n=d.hasNoData(e),r=d.prepareData(e,n),a=0;if(r.x0=r.x,r.y0=r.y,d.source=r,f){f.classed(b,n),d.radialLayout()?f.attr("transform","translate("+(d.margins().left+d.effectiveWidth()/2)+","+(d.margins().top+d.effectiveHeight()/2)+")"):f.attr("transform","translate("+d.margins().left+","+(void 0!==d.nodeSize()?d.margins().top+d.effectiveHeight()/2:d.margins().top)+")");var g=f.select("g."+v).selectAll("path."+p).data(r.descendants().slice(1),function(t){return t.id||(t.id=++a)}),_=f.select("g."+m).selectAll("g."+y).data(r.descendants(),function(t){return t.id||(t.id=++a)});if(d.radialLayout()){var k={};r.descendants().forEach(function(t){k.hasOwnProperty(t.y)?k[t.y]++:k[t.y]=1});!function(t,e){t.exit().transition(e).attr("r",1e-6);t.enter().append("circle").attr("r",1e-6).attr("class","circClass").merge(t).transition(e).attr("r",function(t){return t})}(f.select("g."+A).selectAll("circle.circClass").data(Object.keys(k)),M)}var M=t.transition().duration(d.transitionDuration()).delay(d.transitionDelay());!function(t,e,n){var r=e.exit().transition(n);r.attr("transform",function(t){return h(d.source)}).remove(),r.select("circle").attr("r",1e-6),r.select("text").style("fill-opacity",1e-6);var a=e.enter().append("g").attr("class",u).attr("transform",function(t){return h({x:d.source.x0,y:d.source.y0})}).on("mouseover",o).on("mouseout",l),f=a.append("circle").attr("r",1e-6).on("click",d.collapsible()?c:i);a.transition(n).attr("transform",function(t){return h(t)}),f.transition(n).attr("r",d.nodeMarkerSize()).style("fill",s),d.renderTitle()&&function(t){t.text(function(t){return d.title()(t.data)})}(f.append("title"));d.renderLabel()&&a.append("text").attr("class",x).text(function(t){return d.label()(t)}).style("fill-opacity",1e-6).attr("dy",function(t){return t.children||t._children?"-.35em":".35em"}).attr("x",function(t){return t.children||t._children?-10:10}).style("text-anchor",function(t){return t.children?"end":"start"});var g=e.merge(a).transition(n);g.attr("transform",function(t){return h(t)}),g.select("circle").attr("r",d.nodeMarkerSize()).style("fill",s),g.select("text").style("fill-opacity",1),t.exit().transition(n).attr("d",function(t){var e={x:d.source.x,y:d.source.y};return d._d3.diagonal({source:e,target:e})}).remove();t.enter().insert("path","g").attr("class",p).attr("d",function(t){var e={x:d.source.x0,y:d.source.y0};return d._d3.diagonal({source:e,target:e})}).merge(t).transition(n).attr("d",function(t){return d._d3.diagonal({source:t.parent,target:t})})}(g,_,M),d._highlightFilter(),r.each(function(t){t.x0=t.x,t.y0=t.y})}}function o(t){for(var e=[t.id];null!==t.parent;)e.push(t.parent.id),t=t.parent;f.select("g."+v).selectAll("path."+p).each(function(t){e.includes(t.id)&&(this.parentNode.append(this),this.classList.add("toRoot"))})}function l(t){f.select("g."+v).selectAll("path."+p).classed("toRoot",!1)}function c(t){t.children?(t._children=t.children,t.children=null):t._children&&(t.children=t._children,t._children=null),a()}function u(t,e){return y+" _"+e+" "+y+"-level-"+t.depth+(0===t.height?" leaf":0===t.depth?" root":" internal")}function s(t,e){return d.getColor(t.data,e)}var d={};["base","color","margin","legendable","orientation","hierarchy","collapsible","radialLayout","clusterSizing","highlighter","diagonal"].forEach(function(t){d=r[t+"Mixin"](d)});var f,h,g="cluster",p="cluster-link",y="cluster-node",x="cluster-label",v="cluster-link-group",m="cluster-node-group",A="cluster-label-group",b="empty-chart",_="empty",k={radial:function(e){return"translate("+t.pointRadial(e.x,e.y)+")"},h:function(t){return"translate("+t.y+","+t.x+")"},v:function(t){return"translate("+t.x+","+t.y+")"}};d._highlightableClasses(["g."+y,"path."+p]),d.margins({top:10,right:10,bottom:10,left:10}),d.colorAccessor(d.keyAccessor()),d.title(function(t){return d.keyAccessor()(t)+": "+d.valueAccessor()(t)}),d.label(d.keyAccessor()),d.renderLabel(!0),d.transitionDuration(350),d.transitionDelay(0),d.onClick=i,d._d3={},d.layoutData=function(t,e){return e(t),t.descendants().forEach(function(t){t.key=t.data.key}),t};var D;d._doRender=function(){return h=d.radialLayout()?k.radial:d.horizontalOrientation()?k.h:k.v,d.resetSvg(),D=d.data(),f=d.svg().append("g"),d.layers={base:f},[A,v,m].forEach(function(t){f.append("g").attr("class",t)}),a(),d},d._doRedraw=function(){return a(),d},d.layout=function(){var e=t[g]();return d.radialLayout()?e.size([2*Math.PI,Math.min(d.effectiveHeight(),d.effectiveWidth())/2]):e.size([d.effectiveHeight(),d.effectiveWidth()]),void 0!==d.nodeSize()&&e.nodeSize(d.nodeSize()),void 0!==d.separation()&&e.separation(d.separation()),e};var C=function(t){return d.valueAccessor()(t)>0};return d.emptyTitle=function(t){return 0===arguments.length?_:(_=t,d)},d.layoutType=function(t){return 0===arguments.length?g:"cluster"!==t&&"tree"!==t?(console.log('Could not set layoutType; permitted values are "cluster" and "tree"'),d):(g=t,d)},d.anchor(e,n)},r.partitionRectangle=function(e,n){function i(t,e){g.attr("class")!==v&&h.__clickHandler(t,e)}function a(){for(var e=h.data(),n=!0,a=0;a<e.length;a++)if(0!==h.cappedValueAccessor(e[a])){n=!1;break}var m=h.prepareData(e,n);if(p=m[0],h._d3.scale.x.range([0,h.effectiveWidth()]),h._d3.scale.y.range([0,h.effectiveHeight()]),g){g.classed(v,n);var A=g.select("g."+x).selectAll("g."+y).data(m),b=t.transition().duration(h.transitionDuration()).delay(h.transitionDelay());A.exit().transition(b).remove(),function(t,e){var n=t.enter().append("g").on("click",h.collapsible()?f:i).on("mouseover",function(t,e){h._highlightElement(e,!0)}).on("mouseout",function(t,e){h._highlightElement(e,!1)}).attr("class",o).classed("leaf",function(t){return 0===t.height});n.transition(e).attr("transform",M),h.renderTitle()&&c(n.append("title"));u(n.append("rect").attr("fill",l).style("opacity",0).attr("width",0).attr("height",0),e),h.renderLabel()&&s(n.append("text").style("opacity",0),e)}(A,b),d(A,b),h._highlightFilter(),r.transition(g,h.transitionDuration(),h.transitionDelay()).attr("transform","translate("+h.margins().left+","+h.margins().top+")")}}function o(t,e){return y+" _"+e+(t.depth?" "+y+"-level-"+t.depth:"")}function l(t,e){return h.getColor(t.data,e)}function c(t){t.text(function(t){return h.title()(t.data)})}function u(t,e){t.transition(e).style("opacity",1).attr("fill",l).attr("width",D).attr("height",C)}function s(t,e){t.transition(e).text(function(t){return h.label()(t)}).style("opacity",function(t){return C(t)>h.minHeightForLabel()?1:0}).attr("transform",function(t){return"translate(8,"+(C(t)/2+4)+")"})}function d(t,e){t.transition(e).attr("transform",M),u(t.select("rect"),e),h.renderLabel()&&s(t.select("text"),e),h.renderTitle()&&c(t.select("title"))}function f(t){console.log(p.id===t.id?h.nodes[0]:t),p=h.collapse(p.id===t.id?h.nodes[0]:t),console.log("node now: "+p.id)}var h={};["base","color","cap","margin","legendable","orientation","hierarchy","partition","highlighter","collapsible"].forEach(function(t){h=r[t+"Mixin"](h)});var g,p,y="partition-slice",x="partition-slice-group",v="empty-chart",m="empty",A=12,b=function(t){return h._d3.scale.x(t.x1)-h._d3.scale.x(t.x0)},_=function(t){return h._d3.scale.y(t.y1)-h._d3.scale.y(t.y0)},k=function(t){return"translate("+h._d3.scale.x(t.y0)+","+h._d3.scale.y(t.x0)+")"},D=b,C=_,M=function(t){return"translate("+h._d3.scale.x(t.x0)+","+h._d3.scale.y(t.y0)+")"};return h.margins({top:0,right:0,bottom:0,left:0}),h.sliceCssClass=y,h._highlightableClasses(["g."+y]),h.colorAccessor(h.cappedKeyAccessor),h.title(function(t){return h.cappedKeyAccessor(t)+": "+h.cappedValueAccessor(t)}),h.label(h.cappedKeyAccessor),h.renderLabel(!0),h.transitionDuration(350),h.transitionDelay(0),h.onClick=i,h._d3={},h._d3.scale={x:t.scaleLinear(),y:t.scaleLinear(),qtt:t.scaleLinear(),names:t.scaleOrdinal()},h._d3.transform=function(t,e){return"translate(8,"+(t.x1-t.x0)*e/2+")"},h._doRender=function(){return h.resetSvg(),h.horizontalOrientation()&&(D=_,C=b,M=k),(g=h.svg().append("g")).append("clipPath").attr("id",function(){return"clip-path-"+h.__dcFlag__}).append("rect").attr("x",0).attr("y",0).attr("width",h.effectiveWidth()).attr("height",h.effectiveHeight()),g.append("g").attr("class",x).attr("clip-path","url('#clip-path-"+h.__dcFlag__+"')"),g.append("g").attr("class","partition-label-group"),a(),h},h._doRedraw=function(){return a(),h},h.collapse=function(e){console.log(e.id),h._d3.scale.x.domain([e.x0,e.x1]).range([e.x0?20:0,1===e.x1?h.effectiveWidth():h.effectiveWidth()-20]),h._d3.scale.y.domain([e.y0,1]).range([e.y0?20:0,h.effectiveHeight()]);return d(g.select("g."+x).selectAll("g."+y),t.transition().duration(h.transitionDuration()).delay(h.transitionDelay())),e},h.minHeightForLabel=function(t){return arguments.length?(A=t,h):A},h.emptyTitle=function(t){return 0===arguments.length?m:(m=t,h)},h.anchor(e,n)},r.partitionRectangleChart=r.partitionRectangle,r.sunburstChart=function(e,n){var i={};return["base","color","cap","legendable","pieType","hierarchy","collapsible","partition"].forEach(function(t){i=r[t+"Mixin"](i)}),i.colorAccessor(i.cappedKeyAccessor),i.title(function(t){return i.cappedKeyAccessor(t)+": "+i.cappedValueAccessor(t)}),i.label(i.cappedKeyAccessor),i.tweenType="slice",i._d3={scale:{x:t.scaleLinear().range([0,2*Math.PI]).clamp(!0),y:t.scaleLinear()}},i.anchor(e,n)},r.partitionArc=r.sunburstChart,r.barChart=function(e,n){function i(t){return r.utils.safeNumber(Math.abs(f.y()(t.y+t.y0)-f.y()(t.y0)))}function a(t){var e=f.x()(t.x);return g||(e+=u/2),f.isOrdinal()&&void 0!==h&&(e+=h/2),r.utils.safeNumber(e)}function o(t){var e=f.y()(t.y+t.y0);return t.y<0&&(e-=i(t)),r.utils.safeNumber(e-d)}function l(t){var e=f.x()(t.x);return g&&(e-=u/2),f.isOrdinal()&&void 0!==h&&(e+=h/2),r.utils.safeNumber(e)}function c(e,n){return function(){var r=t.select(this).attr("fill")===e;return n?!r:r}}var u,s=1,d=3,f=r.stackMixin(r.coordinateGridMixin({})),h=2,g=!1,p=!1;return r.override(f,"rescale",function(){return f._rescale(),u=void 0,f}),r.override(f,"render",function(){return f.round()&&g&&!p&&r.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),f._render()}),f.label(function(t){return r.utils.printSingleValue(t.y0+t.y)},!1),f.plotData=function(){var e=f.chartBodyG().selectAll("g.stack").data(f.data());!function(){if(void 0===u){var t=f.xUnitCount();((u=f.isOrdinal()&&void 0===h?Math.floor(f.x().bandwidth()):h?Math.floor((f.xAxisLength()-(t-1)*h)/t):Math.floor(f.xAxisLength()/(1+f.barPadding())/t))===1/0||isNaN(u)||u<s)&&(u=s)}}();var n=(e=e.enter().append("g").attr("class",function(t,e){return"stack _"+e}).merge(e)).size()-1;e.each(function(e,c){var s=t.select(this);!function(t,e,n){var a=t.selectAll("rect.bar").data(n.values,r.pluck("x")),o=a.enter().append("rect").attr("class","bar").attr("fill",r.pluck("data",f.getColor)).attr("x",l).attr("y",f.yAxisHeight()).attr("height",0),c=o.merge(a);f.renderTitle()&&o.append("title").text(r.pluck("data",f.title(n.name))),f.isOrdinal()&&c.on("click",f.onClick),r.transition(c,f.transitionDuration(),f.transitionDelay()).attr("x",l).attr("y",function(t){var e=f.y()(t.y+t.y0);return t.y<0&&(e-=i(t)),r.utils.safeNumber(e)}).attr("width",u).attr("height",function(t){return i(t)}).attr("fill",r.pluck("data",f.getColor)).select("title").text(r.pluck("data",f.title(n.name))),r.transition(a.exit(),f.transitionDuration(),f.transitionDelay()).attr("x",function(t){return f.x()(t.x)}).attr("width",.9*u).remove()}(s,0,e),f.renderLabel()&&n===c&&function(t,e,n){var i=t.selectAll("text.barLabel").data(n.values,r.pluck("x")),l=i.enter().append("text").attr("class","barLabel").attr("text-anchor","middle").attr("x",a).attr("y",o).merge(i);f.isOrdinal()&&(l.on("click",f.onClick),l.attr("cursor","pointer")),r.transition(l,f.transitionDuration(),f.transitionDelay()).attr("x",a).attr("y",o).text(function(t){return f.label()(t)}),r.transition(i.exit(),f.transitionDuration(),f.transitionDelay()).attr("height",0).remove()}(s,0,e)})},f.fadeDeselectedArea=function(t){var e=f.chartBodyG().selectAll("rect.bar");if(f.isOrdinal())f.hasFilter()?(e.classed(r.constants.SELECTED_CLASS,function(t){return f.hasFilter(t.x)}),e.classed(r.constants.DESELECTED_CLASS,function(t){return!f.hasFilter(t.x)})):(e.classed(r.constants.SELECTED_CLASS,!1),e.classed(r.constants.DESELECTED_CLASS,!1));else if(f.brushOn()||f.parentBrushOn())if(f.brushIsEmpty(t))e.classed(r.constants.DESELECTED_CLASS,!1);else{var n=t[0],i=t[1];e.classed(r.constants.DESELECTED_CLASS,function(t){return t.x<n||t.x>=i})}},f.centerBar=function(t){return arguments.length?(g=t,f):g},r.override(f,"onClick",function(t){f._onClick(t.data)}),f.barPadding=function(t){return arguments.length?(f._rangeBandPadding(t),h=void 0,f):f._rangeBandPadding()},f._useOuterPadding=function(){return void 0===h},f.outerPadding=f._outerRangeBandPadding,f.gap=function(t){return arguments.length?(h=t,f):h},f.extendBrush=function(t){return t&&f.round()&&(!g||p)&&(t[0]=f.round()(t[0]),t[1]=f.round()(t[1])),t},f.alwaysUseRounding=function(t){return arguments.length?(p=t,f):p},f.legendHighlight=function(t){f.isLegendableHidden(t)||f.g().selectAll("rect.bar").classed("highlight",c(t.color)).classed("fadeout",c(t.color,!0))},f.legendReset=function(){f.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},r.override(f,"xAxisMax",function(){var t=this._xAxisMax();if("resolution"in f.xUnits()){t+=f.xUnits().resolution}return t}),f.anchor(e,n)},r.lineChart=function(e,n){function i(t,e){return v.getColor.call(t,t.values,e)}function a(){var e=null;if(D)return D;if("function"==typeof C)e=C;else{e={linear:t.curveLinear,"linear-closed":t.curveLinearClosed,step:t.curveStep,"step-before":t.curveStepBefore,"step-after":t.curveStepAfter,basis:t.curveBasis,"basis-open":t.curveBasisOpen,"basis-closed":t.curveBasisClosed,bundle:t.curveBundle,cardinal:t.curveCardinal,"cardinal-open":t.curveCardinalOpen,"cardinal-closed":t.curveCardinalClosed,monotone:t.curveMonotoneX}[C]}return e||(e=t.curveLinear),null!==M&&("function"!=typeof e.tension?r.logger.warn("tension was specified but the curve/interpolate does not support it."):e=e.tension(M)),e}function o(t){return!t||t.indexOf("NaN")>=0?"M0,0":t}function l(e,n){if("always"===v.xyTipsOn()||!v.brushOn()&&!v.parentBrushOn()&&v.xyTipsOn()){var i=h+"-list",a=e.select("g."+i);a.empty()&&(a=e.append("g").attr("class",i)),n.each(function(e,n){var i=e.values;d&&(i=i.filter(d));var o=a.select("g."+h+"._"+n);o.empty()&&(o=a.append("g").attr("class",h+" _"+n)),function(t){(t.select("path."+p).empty()?t.append("path").attr("class",p):t.select("path."+p)).style("display","none").attr("stroke-dasharray","5,5");(t.select("path."+y).empty()?t.append("path").attr("class",y):t.select("path."+y)).style("display","none").attr("stroke-dasharray","5,5")}(o);var l=o.selectAll("circle."+g).data(i,r.pluck("x")),s=l.enter().append("circle").attr("class",g).attr("cx",function(t){return r.utils.safeNumber(v.x()(t.x))}).attr("cy",function(t){return r.utils.safeNumber(v.y()(t.y+t.y0))}).attr("r",c()).style("fill-opacity",_).style("stroke-opacity",k).attr("fill",v.getColor).attr("stroke",v.getColor).on("mousemove",function(){var e=t.select(this);!function(t){t.style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",A)}(e),function(t,e){var n=t.attr("cx"),r=t.attr("cy"),i="M"+(v._yAxisX()-v.margins().left)+" "+r+"L"+n+" "+r,a="M"+n+" "+v.yAxisHeight()+"L"+n+" "+r;e.select("path."+p).style("display","").attr("d",i),e.select("path."+y).style("display","").attr("d",a)}(e,o)}).on("mouseout",function(){!function(t){t.style("fill-opacity",_).style("stroke-opacity",k).attr("r",c())}(t.select(this)),function(t){t.select("path."+p).style("display","none"),t.select("path."+y).style("display","none")}(o)}).merge(l);s.call(u,e),r.transition(s,v.transitionDuration()).attr("cx",function(t){return r.utils.safeNumber(v.x()(t.x))}).attr("cy",function(t){return r.utils.safeNumber(v.y()(t.y+t.y0))}).attr("fill",v.getColor),l.exit().remove()})}}function c(){return b||A}function u(t,e){v.renderTitle()&&(t.select("title").remove(),t.append("title").text(r.pluck("data",v.title(e.name))))}function s(e,n,r){return function(){var i=t.select(this),a=i.attr("stroke")===e&&i.attr("stroke-dasharray")===(n instanceof Array?n.join(","):null)||i.attr("fill")===e;return r?!a:a}}var d,f,h="dc-tooltip",g="dot",p="yRef",y="xRef",x=3,v=r.stackMixin(r.coordinateGridMixin({})),m=!1,A=5,b=null,_=1e-6,k=1e-6,D=null,C=null,M=null,w=!0;return v.transitionDuration(500),v.transitionDelay(0),v._rangeBandPadding(1),v.plotData=function(){var e=v.chartBodyG(),n=e.select("g.stack-list");n.empty()&&(n=e.append("g").attr("class","stack-list"));var c=n.selectAll("g.stack").data(v.data()),u=c.enter().append("g").attr("class",function(t,e){return"stack _"+e});(function(e,n){var l=t.line().x(function(t){return v.x()(t.x)}).y(function(t){return v.y()(t.y+t.y0)}).curve(a());d&&l.defined(d);var c=e.append("path").attr("class","line").attr("stroke",i);f&&c.attr("stroke-dasharray",f),r.transition(n.select("path.line"),v.transitionDuration(),v.transitionDelay()).attr("stroke",i).attr("d",function(t){return o(l(t.values))})})(u,c=u.merge(c)),function(e,n){if(m){var l=t.area().x(function(t){return v.x()(t.x)}).y1(function(t){return v.y()(t.y+t.y0)}).y0(function(t){return v.y()(t.y0)}).curve(a());d&&l.defined(d),e.append("path").attr("class","area").attr("fill",i).attr("d",function(t){return o(l(t.values))}),r.transition(n.select("path.area"),v.transitionDuration(),v.transitionDelay()).attr("fill",i).attr("d",function(t){return o(l(t.values))})}}(u,c),l(e,c),v.renderLabel()&&function(e){e.each(function(e,n){var i=t.select(this).selectAll("text.lineLabel").data(e.values,r.pluck("x")),a=i.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle").merge(i);r.transition(a,v.transitionDuration()).attr("x",function(t){return r.utils.safeNumber(v.x()(t.x))}).attr("y",function(t){var e=v.y()(t.y+t.y0)-x;return r.utils.safeNumber(e)}).text(function(t){return v.label()(t)}),r.transition(i.exit(),v.transitionDuration()).attr("height",0).remove()})}(c)},v.curve=function(t){return arguments.length?(D=t,v):D},v.interpolate=r.logger.deprecate(function(t){return arguments.length?(C=t,v):C},"dc.lineChart.interpolate has been deprecated since version 3.0 use dc.lineChart.curve instead"),v.tension=r.logger.deprecate(function(t){return arguments.length?(M=t,v):M},"dc.lineChart.tension has been deprecated since version 3.0 use dc.lineChart.curve instead"),v.defined=function(t){return arguments.length?(d=t,v):d},v.dashStyle=function(t){return arguments.length?(f=t,v):f},v.renderArea=function(t){return arguments.length?(m=t,v):m},v.label(function(t){return r.utils.printSingleValue(t.y0+t.y)},!1),v.xyTipsOn=function(t){return arguments.length?(w=t,v):w},v.dotRadius=function(t){return arguments.length?(A=t,v):A},v.renderDataPoints=function(t){return arguments.length?(t?(_=t.fillOpacity||.8,k=t.strokeOpacity||0,b=t.radius||2):(_=1e-6,k=1e-6,b=null),v):{fillOpacity:_,strokeOpacity:k,radius:b}},v.legendHighlight=function(t){v.isLegendableHidden(t)||v.g().selectAll("path.line, path.area").classed("highlight",s(t.color,t.dashstyle)).classed("fadeout",s(t.color,t.dashstyle,!0))},v.legendReset=function(){v.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},r.override(v,"legendables",function(){var t=v._legendables();return f?t.map(function(t){return t.dashstyle=f,t}):t}),v.anchor(e,n)},r.dataCount=function(e,n){var i=t.format(",d"),a=r.baseMixin({}),o={some:"",all:""};return a.html=function(t){return arguments.length?(t.all&&(o.all=t.all),t.some&&(o.some=t.some),a):o},a.formatNumber=function(t){return arguments.length?(i=t,a):i},a._doRender=function(){var t=a.dimension().size(),e=a.group().value(),n=i(t),r=i(e);return t===e&&""!==o.all?a.root().html(o.all.replace("%total-count",n).replace("%filter-count",r)):""!==o.some?a.root().html(o.some.replace("%total-count",n).replace("%filter-count",r)):(a.selectAll(".total-count").text(n),a.selectAll(".filter-count").text(r)),a},a._doRedraw=function(){return a._doRender()},a.anchor(e,n)},r.dataTable=function(e,n){function i(){var e=!0;if(h.forEach(function(t){e&="function"==typeof t}),!e){var n=d.selectAll("thead").data([0]);n.exit().remove();var r=(n=n.enter().append("thead").merge(n)).selectAll("tr").data([0]);r.exit().remove();var i=(r=r.enter().append("tr").merge(r)).selectAll("th").data(h);i.exit().remove(),i.enter().append("th").merge(i).attr("class",s).html(function(t){return d._doColumnHeaderFormat(t)})}var l=d.root().selectAll("tbody").data(function(){var e;e=p===t.ascending?d.dimension().bottom(f):d.dimension().top(f);return t.nest().key(d.group()).sortKeys(p).entries(e.sort(function(t,e){return p(g(t),g(e))}).slice(y,a))}(),function(t){return d.keyAccessor()(t)}),c=l.enter().append("tbody");return!0===x&&c.append("tr").attr("class",u).append("td").attr("class",o).attr("colspan",h.length).html(function(t){return d.keyAccessor()(t)}),l.exit().remove(),c}var a,o="dc-table-label",l="dc-table-row",c="dc-table-column",u="dc-table-group",s="dc-table-head",d=r.baseMixin({}),f=25,h=[],g=function(t){return t},p=t.ascending,y=0,x=!0;return d._doRender=function(){return d.selectAll("tbody").remove(),function(t){var e=t.order().selectAll("tr."+l).data(function(t){return t.values}),n=e.enter().append("tr").attr("class",l);h.forEach(function(t,e){n.append("td").attr("class",c+" _"+e).html(function(e){return d._doColumnValueFormat(t,e)})}),e.exit().remove()}(i()),d},d._doColumnValueFormat=function(t,e){return"function"==typeof t?t(e):"string"==typeof t?e[t]:t.format(e)},d._doColumnHeaderFormat=function(t){return"function"==typeof t?d._doColumnHeaderFnToString(t):"string"==typeof t?d._doColumnHeaderCapitalize(t):String(t.label)},d._doColumnHeaderCapitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},d._doColumnHeaderFnToString=function(t){var e=String(t),n=e.indexOf("return ");if(n>=0){var r=e.lastIndexOf(";");if(r>=0){(e=e.substring(n+7,r)).indexOf("numberFormat")>=0&&(e=e.replace("numberFormat",""))}}return e},d._doRedraw=function(){return d._doRender()},d.size=function(t){return arguments.length?(f=t,d):f},d.beginSlice=function(t){return arguments.length?(y=t,d):y},d.endSlice=function(t){return arguments.length?(a=t,d):a},d.columns=function(t){return arguments.length?(h=t,d):h},d.sortBy=function(t){return arguments.length?(g=t,d):g},d.order=function(t){return arguments.length?(p=t,d):p},d.showGroups=function(t){return arguments.length?(x=t,d):x},d.anchor(e,n)},r.dataGrid=function(e,n){function i(){var e=c.root().selectAll("div."+l).data(function(){var e=c.dimension().top(u);return t.nest().key(c.group()).sortKeys(f).entries(e.sort(function(t,e){return f(d(t),d(e))}).slice(h,a))}(),function(t){return c.keyAccessor()(t)}),n=e.enter().append("div").attr("class",l);return g&&n.html(function(t){return g(t)}),e.exit().remove(),n}var a,o="dc-grid-item",l="dc-grid-top",c=r.baseMixin({}),u=999,s=function(t){return"you need to provide an html() handling param:  "+JSON.stringify(t)},d=function(t){return t},f=t.ascending,h=0,g=function(t){return"<div class='dc-grid-group'><h1 class='dc-grid-label'>"+c.keyAccessor()(t)+"</h1></div>"};return c._doRender=function(){return c.selectAll("div."+l).remove(),function(t){var e=t.order().selectAll("div."+o).data(function(t){return t.values});e.exit().remove(),e=e.enter().append("div").attr("class",o).html(function(t){return s(t)}).merge(e)}(i()),c},c._doRedraw=function(){return c._doRender()},c.beginSlice=function(t){return arguments.length?(h=t,c):h},c.endSlice=function(t){return arguments.length?(a=t,c):a},c.size=function(t){return arguments.length?(u=t,c):u},c.html=function(t){return arguments.length?(s=t,c):s},c.htmlGroup=function(t){return arguments.length?(g=t,c):g},c.sortBy=function(t){return arguments.length?(d=t,c):d},c.order=function(t){return arguments.length?(f=t,c):f},c.anchor(e,n)},r.bubbleChart=function(t,e){var n=r.bubbleMixin(r.coordinateGridMixin({}));n.transitionDuration(750),n.transitionDelay(0);var i=function(t){return"translate("+function(t){var e=n.x()(n.keyAccessor()(t));return!isNaN(e)&&isFinite(e)||(e=0),e}(t)+","+function(t){var e=n.y()(n.valueAccessor()(t));return!isNaN(e)&&isFinite(e)||(e=0),e}(t)+")"};return n.plotData=function(){n.calculateRadiusDomain(),n.r().range([n.MIN_RADIUS,n.xAxisLength()*n.maxBubbleRelativeSize()]);var t=n.data(),e=n.chartBodyG().selectAll("g."+n.BUBBLE_NODE_CLASS).data(t,function(t){return t.key});n.sortBubbleSize()&&e.order(),function(t){t.exit().remove()}(e),function(t){r.transition(t,n.transitionDuration(),n.transitionDelay()).attr("transform",i).select("circle."+n.BUBBLE_CLASS).attr("fill",n.getColor).attr("r",function(t){return n.bubbleR(t)}).attr("opacity",function(t){return n.bubbleR(t)>0?1:0}),n.doUpdateLabels(t),n.doUpdateTitles(t)}(e=function(t){var e=t.enter().append("g");return e.attr("class",n.BUBBLE_NODE_CLASS).attr("transform",i).append("circle").attr("class",function(t,e){return n.BUBBLE_CLASS+" _"+e}).on("click",n.onClick).attr("fill",n.getColor).attr("r",0),t=e.merge(t),r.transition(t,n.transitionDuration(),n.transitionDelay()).select("circle."+n.BUBBLE_CLASS).attr("r",function(t){return n.bubbleR(t)}).attr("opacity",function(t){return n.bubbleR(t)>0?1:0}),n._doRenderLabel(e),n._doRenderTitles(e),t}(e)),n.fadeDeselectedArea(n.filter())},n.renderBrush=function(){},n.redrawBrush=function(t,e){n.fadeDeselectedArea(t)},n.anchor(t,e)},r.compositeChart=function(e,n){function i(e,n){var i,a,s,d,h;return e&&(i=t.min(c(o())),a=r.utils.add(t.max(u(o())),f.yAxisPadding())),n&&(s=t.min(c(l())),d=r.utils.add(t.max(u(l())),f.yAxisPadding())),f.alignYAxes()&&e&&n&&(h=function(t,e,n,r){var i=(r-n)/(e-t);return{lyAxisMin:Math.min(t,n/i),lyAxisMax:Math.max(e,r/i),ryAxisMin:Math.min(n,t*i),ryAxisMax:Math.max(r,e*i)}}(i,a,s,d)),h||{lyAxisMin:i,lyAxisMax:a,ryAxisMin:s,ryAxisMax:d}}function a(t,e){t._generateG(f.g()),t.g().attr("class",d+" _"+e)}function o(){return h.filter(function(t){return!t.useRightYAxis()})}function l(){return h.filter(function(t){return t.useRightYAxis()})}function c(t){return t.map(function(t){return t.yAxisMin()})}function u(t){return t.map(function(t){return t.yAxisMax()})}var s,d="sub",f=r.coordinateGridMixin({}),h=[],g={},p=!1,y=!0,x=!1,v=t.axisRight(),m=0,A=12,b=!1;return f._mandatoryAttributes([]),f.transitionDuration(500),f.transitionDelay(0),r.override(f,"_generateG",function(){for(var t=this.__generateG(),e=0;e<h.length;++e){var n=h[e];a(n,e),n.dimension()||n.dimension(f.dimension()),n.group()||n.group(f.group()),n.chartGroup(f.chartGroup()),n.svg(f.svg()),n.xUnits(f.xUnits()),n.transitionDuration(f.transitionDuration(),f.transitionDelay()),n.parentBrushOn(f.brushOn()),n.brushOn(!1),n.renderTitle(f.renderTitle()),n.elasticX(f.elasticX())}return t}),f.on("filtered.dcjs-composite-chart",function(t){for(var e=0;e<h.length;++e)h[e].replaceFilter(f.filter())}),f._prepareYAxis=function(){var e=0!==o().length,n=0!==l().length,r=i(e,n);e&&function(e){var n=void 0===f.y()||f.elasticY(),r=n||f.resizing();void 0===f.y()&&f.y(t.scaleLinear()),n&&f.y().domain([e.lyAxisMin,e.lyAxisMax]),r&&f.y().rangeRound([f.yAxisHeight(),0]),f.y().range([f.yAxisHeight(),0]),f.yAxis(f.yAxis().scale(f.y()))}(r),n&&function(e){var n=void 0===f.rightY()||f.elasticY(),r=n||f.resizing();void 0===f.rightY()&&f.rightY(t.scaleLinear()),n&&f.rightY().domain([e.ryAxisMin,e.ryAxisMax]),r&&f.rightY().rangeRound([f.yAxisHeight(),0]),f.rightY().range([f.yAxisHeight(),0]),f.rightYAxis(f.rightYAxis().scale(f.rightY()))}(r),o().length>0&&!b?f._renderHorizontalGridLinesForAxis(f.g(),f.y(),f.yAxis()):l().length>0&&f._renderHorizontalGridLinesForAxis(f.g(),s,v)},f.renderYAxis=function(){0!==o().length&&(f.renderYAxisAt("y",f.yAxis(),f.margins().left),f.renderYAxisLabel("y",f.yAxisLabel(),-90)),0!==l().length&&(f.renderYAxisAt("yr",f.rightYAxis(),f.width()-f.margins().right),f.renderYAxisLabel("yr",f.rightYAxisLabel(),90,f.width()-A))},f.plotData=function(){for(var t=0;t<h.length;++t){var e=h[t];e.g()||a(e,t),p&&e.colors(f.colors()),e.x(f.x()),e.xAxis(f.xAxis()),e.useRightYAxis()?(e.y(f.rightY()),e.yAxis(f.rightYAxis())):(e.y(f.y()),e.yAxis(f.yAxis())),e.plotData(),e._activateRenderlets()}},f.useRightAxisGridLines=function(t){return arguments?(b=t,f):b},f.childOptions=function(t){return arguments.length?(g=t,h.forEach(function(t){t.options(g)}),f):g},f.fadeDeselectedArea=function(t){if(f.brushOn())for(var e=0;e<h.length;++e){h[e].fadeDeselectedArea(t)}},f.rightYAxisLabel=function(t,e){return arguments.length?(m=t,f.margins().right-=A,A=void 0===e?12:e,f.margins().right+=A,f):m},f.compose=function(t){return(h=t).forEach(function(t){t.height(f.height()),t.width(f.width()),t.margins(f.margins()),y&&t.title(f.title()),t.options(g)}),f},f.children=function(){return h},f.shareColors=function(t){return arguments.length?(p=t,f):p},f.shareTitle=function(t){return arguments.length?(y=t,f):y},f.rightY=function(t){return arguments.length?(s=t,f.rescale(),f):s},f.alignYAxes=function(t){return arguments.length?(x=t,f.rescale(),f):x},delete f.yAxisMin,delete f.yAxisMax,r.override(f,"xAxisMin",function(){return r.utils.subtract(t.min(h.map(function(t){return t.xAxisMin()})),f.xAxisPadding(),f.xAxisPaddingUnit())}),r.override(f,"xAxisMax",function(){return r.utils.add(t.max(h.map(function(t){return t.xAxisMax()})),f.xAxisPadding(),f.xAxisPaddingUnit())}),f.legendables=function(){return h.reduce(function(t,e){return p&&e.colors(f.colors()),t.push.apply(t,e.legendables()),t},[])},f.legendHighlight=function(t){for(var e=0;e<h.length;++e){h[e].legendHighlight(t)}},f.legendReset=function(t){for(var e=0;e<h.length;++e){h[e].legendReset(t)}},f.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},f.rightYAxis=function(t){return arguments.length?(v=t,f):v},f.anchor(e,n)},r.seriesChart=function(e,n){function i(t){c[t].g()&&c[t].g().remove(),delete c[t]}function a(){Object.keys(c).map(i),c={}}var o,l=r.compositeChart(e,n),c={},u=r.lineChart,s=t.ascending,d=function(e,n){return t.ascending(l.keyAccessor()(e),l.keyAccessor()(n))};return l._mandatoryAttributes().push("seriesAccessor","chart"),l.shareColors(!0),l._preprocessData=function(){var e,a=[],f=t.nest().key(o);s&&f.sortKeys(s),d&&f.sortValues(d);var h=f.entries(l.data()).map(function(t,i){var o=c[t.key]||u.call(l,l,n,t.key,i);return c[t.key]||(e=!0),c[t.key]=o,a.push(t.key),o.dimension(l.dimension()).group({all:"function"==typeof t.values?t.values:r.utils.constant(t.values)},t.key).keyAccessor(l.keyAccessor()).valueAccessor(l.valueAccessor()).brushOn(!1)});Object.keys(c).filter(function(t){return-1===a.indexOf(t)}).forEach(function(t){i(t),e=!0}),l._compose(h),e&&l.legend()&&l.legend().render()},l.chart=function(t){return arguments.length?(u=t,a(),l):u},l.seriesAccessor=function(t){return arguments.length?(o=t,a(),l):o},l.seriesSort=function(t){return arguments.length?(s=t,a(),l):s},l.valueSort=function(t){return arguments.length?(d=t,a(),l):d},l._compose=l.compose,delete l.compose,l},r.geoChoroplethChart=function(e,n){function i(e){var n=function(){for(var t={},e=u.data(),n=0;n<e.length;++n)t[u.keyAccessor()(e[n])]=u.valueAccessor()(e[n]);return t}();if(function(t){return c(t).keyAccessor}(e)){var i=function(t){return u.svg().selectAll(function(t){return"g.layer"+t+" g."+c(t).name}(t)).classed("selected",function(e){return a(t,e)}).classed("deselected",function(e){return o(t,e)}).attr("class",function(e){var n=c(t).name,i=r.utils.nameToId(c(t).keyAccessor(e)),l=n+" "+i;return a(t,e)&&(l+=" selected"),o(t,e)&&(l+=" deselected"),l})}(e);!function(e,n,i){var a=e.select("path").attr("fill",function(){var e=t.select(this).attr("fill");return e||"none"}).on("click",function(t){return u.onClick(t,n)});r.transition(a,u.transitionDuration(),u.transitionDelay()).attr("fill",function(t,e){return u.getColor(i[c(n).keyAccessor(t)],e)})}(i,e,n),function(t,e,n){u.renderTitle()&&t.selectAll("title").text(function(t){var r=l(e,t),i=n[r];return u.title()({key:r,value:i})})}(i,e,n)}}function a(t,e){return u.hasFilter()&&u.hasFilter(l(t,e))}function o(t,e){return u.hasFilter()&&!u.hasFilter(l(t,e))}function l(t,e){return c(t).keyAccessor(e)}function c(t){return h[t]}var u=r.colorMixin(r.baseMixin({}));u.colorAccessor(function(t){return t||0});var s,d,f=t.geoPath(),h=[];u._doRender=function(){u.resetSvg();for(var t=0;t<h.length;++t){var e=u.svg().append("g").attr("class","layer"+t).selectAll("g."+c(t).name).data(c(t).data);(e=e.enter().append("g").attr("class",c(t).name).merge(e)).append("path").attr("fill","white").attr("d",g()),e.append("title"),i(t)}s=!1},u.onClick=function(t,e){var n=c(e).keyAccessor(t);r.events.trigger(function(){u.filter(n),u.redrawGroup()})},u._doRedraw=function(){for(var t=0;t<h.length;++t)i(t),s&&u.svg().selectAll("g."+c(t).name+" path").attr("d",g());s=!1},u.overlayGeoJson=function(t,e,n){for(var r=0;r<h.length;++r)if(h[r].name===e)return h[r].data=t,h[r].keyAccessor=n,u;return h.push({name:e,data:t,keyAccessor:n}),u},u.projection=function(t){return arguments.length?(d=t,s=!0,u):d};var g=function(){return void 0===d?(r.logger.warn("choropleth projection default of geoAlbers is deprecated, in next version projection will need to be set explicitly"),f.projection(t.geoAlbersUsa())):f.projection(d)};return u.geoJsons=function(){return h},u.geoPath=function(){return f},u.removeGeoJson=function(t){for(var e=[],n=0;n<h.length;++n){var r=h[n];r.name!==t&&e.push(r)}return h=e,u},u.anchor(e,n)},r.bubbleOverlay=function(e,n){function i(){var t={};return s.data().forEach(function(e){t[s.keyAccessor()(e)]=e}),t}function a(t,e){var n=c+" "+r.utils.nameToId(t.name),i=o.select("g."+r.utils.nameToId(t.name));return i.empty()&&(i=o.append("g").attr("class",n).attr("transform","translate("+t.x+","+t.y+")")),i.datum(e[t.name]),i}var o,l="bubble-overlay",c="node",u="bubble",s=r.bubbleMixin(r.baseMixin({})),d=[];return s.transitionDuration(750),s.transitionDelay(0),s.radiusValueAccessor(function(t){return t.value}),s.point=function(t,e,n){return d.push({name:t,x:e,y:n}),s},s._doRender=function(){return(o=s.select("g."+l)).empty()&&(o=s.svg().append("g").attr("class",l)),o=o,s.r().range([s.MIN_RADIUS,s.width()*s.maxBubbleRelativeSize()]),function(){var t=i();s.calculateRadiusDomain(),d.forEach(function(e){var n=a(e,t),i=n.select("circle."+u);i.empty()&&(i=n.append("circle").attr("class",u).attr("r",0).attr("fill",s.getColor).on("click",s.onClick)),r.transition(i,s.transitionDuration(),s.transitionDelay()).attr("r",function(t){return s.bubbleR(t)}),s._doRenderLabel(n),s._doRenderTitles(n)})}(),s.fadeDeselectedArea(s.filter()),s},s._doRedraw=function(){return function(){var t=i();s.calculateRadiusDomain(),d.forEach(function(e){var n=a(e,t),i=n.select("circle."+u);r.transition(i,s.transitionDuration(),s.transitionDelay()).attr("r",function(t){return s.bubbleR(t)}).attr("fill",s.getColor),s.doUpdateLabels(n),s.doUpdateTitles(n)})}(),s.fadeDeselectedArea(s.filter()),s},s.debug=function(e){if(e){var n=s.select("g."+r.constants.DEBUG_GROUP_CLASS);n.empty()&&(n=s.svg().append("g").attr("class",r.constants.DEBUG_GROUP_CLASS));var i=n.append("text").attr("x",10).attr("y",20);n.append("rect").attr("width",s.width()).attr("height",s.height()).on("mousemove",function(){var e=t.mouse(n.node()),r=e[0]+", "+e[1];i.text(r)})}else s.selectAll(".debug").remove();return s},s.anchor(e,n),s},r.rowChart=function(e,n){function i(){var e=s.select("g.axis");!function(){if(!d||f){var e=t.extent(h,D.cappedValueAccessor);e[0]>0&&(e[0]=0),e[1]<0&&(e[1]=0),d=t.scaleLinear().domain(e).range([0,D.effectiveWidth()])}C.scale(d)}(),e.empty()&&(e=s.append("g").attr("class","axis")),e.attr("transform","translate(0, "+D.effectiveHeight()+")"),r.transition(e,D.transitionDuration(),D.transitionDelay()).call(C)}function a(){h=D.data(),i(),s.selectAll("g.tick").select("line.grid-line").remove(),s.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-D.effectiveHeight()});var t=s.selectAll("g."+b).data(h);!function(t){t.exit().remove()}(t),function(t){var e,n=h.length;e=A||(D.effectiveHeight()-(n+1)*m)/n;y||(p=e/2);var i=t.attr("transform",function(t,n){return"translate(0,"+((n+1)*m+n*e)+")"}).select("rect").attr("height",e).attr("fill",D.getColor).on("click",l).classed("deselected",function(t){return!!D.hasFilter()&&!u(t)}).classed("selected",function(t){return!!D.hasFilter()&&u(t)});r.transition(i,D.transitionDuration(),D.transitionDelay()).attr("width",function(t){return Math.abs(o()-d(D.valueAccessor()(t)))}).attr("transform",c),function(t){D.renderTitle()&&(t.select("title").remove(),t.append("title").text(D.title()))}(t),function(t){if(D.renderLabel()){var e=t.select("text").attr("x",g).attr("y",p).attr("dy",x).on("click",l).attr("class",function(t,e){return b+" _"+e}).text(function(t){return D.label()(t)});r.transition(e,D.transitionDuration(),D.transitionDelay()).attr("transform",c)}if(D.renderTitleLabel()){var n=t.select("."+_).attr("x",D.effectiveWidth()-v).attr("y",p).attr("dy",x).attr("text-anchor","end").on("click",l).attr("class",function(t,e){return _+" _"+e}).text(function(t){return D.title()(t)});r.transition(n,D.transitionDuration(),D.transitionDelay()).attr("transform",c)}}(t)}(t=function(t){var e=t.enter().append("g").attr("class",function(t,e){return b+" _"+e});return e.append("rect").attr("width",0),function(t){D.renderLabel()&&t.append("text").on("click",l),D.renderTitleLabel()&&t.append("text").attr("class",_).on("click",l)}(e),e}(t).merge(t))}function o(){var t=d(0);return t===-1/0||t!=t?d(1):t}function l(t){D.onClick(t)}function c(t){var e=d(D.cappedValueAccessor(t)),n=o();return"translate("+(e>n?n:e)+",0)"}function u(t){return D.hasFilter(D.cappedKeyAccessor(t))}var s,d,f,h,g=10,p=15,y=!1,x="0.35em",v=2,m=5,A=!1,b="row",_="titlerow",k=!1,D=r.capMixin(r.marginMixin(r.colorMixin(r.baseMixin({})))),C=t.axisBottom();return D.rowsCap=D.cap,D._doRender=function(){return D.resetSvg(),s=D.svg().append("g").attr("transform","translate("+D.margins().left+","+D.margins().top+")"),a(),D},D.title(function(t){return D.cappedKeyAccessor(t)+": "+D.cappedValueAccessor(t)}),D.label(D.cappedKeyAccessor),D.x=function(t){return arguments.length?(d=t,D):d},D.renderTitleLabel=function(t){return arguments.length?(k=t,D):k},D._doRedraw=function(){return a(),D},D.xAxis=function(t){return arguments.length?(C=t,this):C},D.fixedBarHeight=function(t){return arguments.length?(A=t,D):A},D.gap=function(t){return arguments.length?(m=t,D):m},D.elasticX=function(t){return arguments.length?(f=t,D):f},D.labelOffsetX=function(t){return arguments.length?(g=t,D):g},D.labelOffsetY=function(t){return arguments.length?(p=t,y=!0,D):p},D.titleLabelOffsetX=function(t){return arguments.length?(v=t,D):v},D.anchor(e,n)},r.legend=function(){function t(){return u+c}var e,n,i,a={},o=0,l=0,c=12,u=5,s=!1,d=560,f=70,h=!1,g=r.pluck("name");return a.parent=function(t){return arguments.length?(e=t,a):e},a.render=function(){e.svg().select("g.dc-legend").remove(),i=e.svg().append("g").attr("class","dc-legend").attr("transform","translate("+o+","+l+")");var a=e.legendables();void 0!==n&&(a=a.slice(0,n));var p=i.selectAll("g.dc-legend-item").data(a).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(t){e.legendHighlight(t)}).on("mouseout",function(t){e.legendReset(t)}).on("click",function(t){t.chart.legendToggle(t)});i.selectAll("g.dc-legend-item").classed("fadeout",function(t){return t.chart.isLegendableHidden(t)}),a.some(r.pluck("dashstyle"))?p.append("line").attr("x1",0).attr("y1",c/2).attr("x2",c).attr("y2",c/2).attr("stroke-width",2).attr("stroke-dasharray",r.pluck("dashstyle")).attr("stroke",r.pluck("color")):p.append("rect").attr("width",c).attr("height",c).attr("fill",function(t){return t?t.color:"blue"}),p.append("text").text(g).attr("x",c+2).attr("y",function(){return c/2+(this.clientHeight?this.clientHeight:13)/2-2});var y=0,x=0;p.attr("transform",function(e,n){if(s){var r=!0===h?this.getBBox().width+u:f;y+r>d&&y>0&&(++x,y=0);var i="translate("+y+","+x*t()+")";return y+=r,i}return"translate(0,"+n*t()+")"})},a.x=function(t){return arguments.length?(o=t,a):o},a.y=function(t){return arguments.length?(l=t,a):l},a.gap=function(t){return arguments.length?(u=t,a):u},a.itemHeight=function(t){return arguments.length?(c=t,a):c},a.horizontal=function(t){return arguments.length?(s=t,a):s},a.legendWidth=function(t){return arguments.length?(d=t,a):d},a.itemWidth=function(t){return arguments.length?(f=t,a):f},a.autoItemWidth=function(t){return arguments.length?(h=t,a):h},a.legendText=function(t){return arguments.length?(g=t,a):g},a.maxItems=function(t){return arguments.length?(n=r.utils.isNumber(t)?t:void 0,a):n},a},r.htmlLegend=function(){var e,n,i,a,o={},l=r.pluck("name"),c=!1,u=!1;return o.parent=function(t){return arguments.length?(e=t,o):e},o.render=function(){var t=c?"dc-legend-item-horizontal":"dc-legend-item-vertical";n.select("div.dc-html-legend").remove();var o=n.append("div").attr("class","dc-html-legend");o.attr("style","max-width:"+n.nodes()[0].style.width);var s=e.legendables(),d=e.filters();void 0!==i&&(s=s.slice(0,i));var f=a||t,h=o.selectAll("div."+f).data(s).enter().append("div").classed(f,!0).on("mouseover",e.legendHighlight).on("mouseout",e.legendReset).on("click",e.legendToggle);u&&h.classed(r.constants.SELECTED_CLASS,function(t){return-1!==d.indexOf(t.name)}),h.append("span").attr("class","dc-legend-item-color").style("background-color",r.pluck("color")),h.append("span").attr("class","dc-legend-item-label").attr("title",l).text(l)},o.container=function(e){return arguments.length?(n=t.select(e),o):n},o.legendItemClass=function(t){return arguments.length?(a=t,o):a},o.highlightSelected=function(t){return arguments.length?(u=t,o):u},o.horizontal=function(t){return arguments.length?(c=t,o):c},o.legendText=function(t){return arguments.length?(l=t,o):l},o.maxItems=function(t){return arguments.length?(i=r.utils.isNumber(t)?t:void 0,o):i},o},r.scatterPlot=function(e,n){function i(t,e){return u(t)?b[e]?Math.pow(h,2):Math.pow(g,2):Math.pow(x,2)}function a(t,e){l.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text(function(t){return l.title()(t)}))}function o(e,n){var i=l.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return e(t.select(this))}),a=c.size();c.size(Math.pow(n,2)),r.transition(i,l.transitionDuration(),l.transitionDelay()).attr("d",c),c.size(a)}var l=r.coordinateGridMixin({}),c=t.symbol(),u=function(t){return t.value},s=l.keyAccessor();l.keyAccessor(function(t){return s(t)[0]}),l.valueAccessor(function(t){return s(t)[1]}),l.colorAccessor(function(){return l._groupName}),l.title(function(t){return l.keyAccessor()(t)+","+l.valueAccessor()(t)+": "+l.existenceAccessor()(t)});var d=function(t){return"translate("+l.x()(l.keyAccessor()(t))+","+l.y()(l.valueAccessor()(t))+")"},f=7,h=5,g=3,p=null,y=1,x=0,v=0,m=1,A=null,b=[];return l.brush(t.brush()),c.size(i),r.override(l,"_filter",function(t){return arguments.length?l.__filter(r.filters.RangedTwoDimensionalFilter(t)):l.__filter()}),l.plotData=function(){var t=l.chartBodyG().selectAll("path.symbol").data(l.data());r.transition(t.exit(),l.transitionDuration(),l.transitionDelay()).attr("opacity",0).remove(),(t=t.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",l.getColor).attr("transform",d).merge(t)).call(a,l.data()),t.each(function(t,e){b[e]=!l.filter()||l.filter().isFiltered([l.keyAccessor()(t),l.valueAccessor()(t)])}),r.transition(t,l.transitionDuration(),l.transitionDelay()).attr("opacity",function(t,e){return u(t)?b[e]?m:l.excludedOpacity():v}).attr("fill",function(t,e){return A&&!u(t)?A:l.excludedColor()&&!b[e]?l.excludedColor():l.getColor(t)}).attr("transform",d).attr("d",c)},l.existenceAccessor=function(t){return arguments.length?(u=t,this):u},l.symbol=function(t){return arguments.length?(c.type(t),l):c.type()},l.customSymbol=function(t){return arguments.length?((c=t).size(i),l):c},l.symbolSize=function(t){return arguments.length?(h=t,l):h},l.highlightedSize=function(t){return arguments.length?(f=t,l):f},l.excludedSize=function(t){return arguments.length?(g=t,l):g},l.excludedColor=function(t){return arguments.length?(p=t,l):p},l.excludedOpacity=function(t){return arguments.length?(y=t,l):y},l.hiddenSize=l.emptySize=function(t){return arguments.length?(x=t,l):x},l.emptyColor=function(t){return arguments.length?(A=t,l):A},l.emptyOpacity=function(t){return arguments.length?(v=t,l):v},l.nonemptyOpacity=function(t){return arguments.length?(m=t,l):v},l.legendables=function(){return[{chart:l,name:l._groupName,color:l.getColor()}]},l.legendHighlight=function(e){o(function(t){return t.attr("fill")===e.color},f),l.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return t.select(this).attr("fill")!==e.color}).classed("fadeout",!0)},l.legendReset=function(e){o(function(t){return t.attr("fill")===e.color},h),l.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return t.select(this).attr("fill")!==e.color}).classed("fadeout",!1)},l.createBrushHandlePaths=function(){},l.extendBrush=function(t){return l.round()&&(t[0]=t[0].map(l.round()),t[1]=t[1].map(l.round())),t},l.brushIsEmpty=function(t){return!t||t[0][0]>=t[1][0]||t[0][1]>=t[1][1]},l._brushing=function(){if(t.event.sourceEvent&&(!t.event.sourceEvent.type||-1===["start","brush","end"].indexOf(t.event.sourceEvent.type))){var e=t.event.selection,n=l.brushIsEmpty(e);e&&(e=e.map(function(t){return t.map(function(t,e){return(0===e?l.x():l.y()).invert(t)})}),e=l.extendBrush(e),n=n&&l.brushIsEmpty(e)),l.redrawBrush(e,!1);var i=n?null:r.filters.RangedTwoDimensionalFilter(e);r.events.trigger(function(){l.replaceFilter(i),l.redrawGroup()},r.constants.EVENT_DELAY)}},l.redrawBrush=function(t,e){var n=l.brush(),i=l.gBrush();if(l.brushOn()&&i)if(l.resizing()&&l.setBrushExtents(e),t){t=t.map(function(t){return t.map(function(t,e){return(0===e?l.x():l.y())(t)})});r.optionalTransition(e,l.transitionDuration(),l.transitionDelay())(i).call(n.move,t)}else i.call(n.move,t);l.fadeDeselectedArea(t)},l.setBrushY=function(t){t.call(l.brush().y(l.y()))},l.anchor(e,n)},r.numberDisplay=function(e,n){var i,a=t.format(".2s"),o=r.baseMixin({}),l={one:"",some:"",none:""};return o._mandatoryAttributes(["group"]),o.ordering(function(t){return t.value}),o.html=function(t){return arguments.length?(t.none?l.none=t.none:t.one?l.none=t.one:t.some&&(l.none=t.some),t.one?l.one=t.one:t.some&&(l.one=t.some),t.some?l.some=t.some:t.one&&(l.some=t.one),o):l},o.value=function(){return o.data()},o.data(function(t){var e=t.value?t.value():function(t){if(!t.length)return null;var e=o._computeOrderedGroups(t);return e[e.length-1]}(t.all());return o.valueAccessor()(e)}),o.transitionDuration(250),o.transitionDelay(0),o._doRender=function(){var e=o.value(),n=o.selectAll(".number-display");n.empty()&&(n=n.data([0]).enter().append("span").attr("class","number-display").merge(n)),n.transition().duration(o.transitionDuration()).delay(o.transitionDelay()).ease(t.easeQuad).tween("text",function(){var n=isFinite(i)?i:0,r=t.interpolateNumber(n||0,e);i=e;var a=this;return function(t){var n=null,i=o.formatNumber()(r(t));0===e&&""!==l.none?n=l.none:1===e&&""!==l.one?n=l.one:""!==l.some&&(n=l.some),a.innerHTML=n?n.replace("%number",i):i}})},o._doRedraw=function(){return o._doRender()},o.formatNumber=function(t){return arguments.length?(a=t,o):a},o.anchor(e,n)},r.heatMap=function(e,n){function i(t,e){var n=g.selectAll(".box-group").filter(function(n){return n.key[t]===e}),i=n.filter(function(t){return!g.hasFilter(t.key)});r.events.trigger(function(){var t=(i.empty()?n:i).data().map(function(t){return r.filters.TwoDimensionalFilter(t.key)});g._filter([t]),g.redrawGroup()})}var a,o,l,c=t.ascending,u=t.ascending,s=t.scaleBand(),d=t.scaleBand(),f=6.75,h=6.75,g=r.colorMixin(r.marginMixin(r.baseMixin({})));g._mandatoryAttributes(["group"]),g.title(g.colorAccessor());var p=function(t){return t},y=function(t){return t};g.colsLabel=function(t){return arguments.length?(p=t,g):p},g.rowsLabel=function(t){return arguments.length?(y=t,g):y};var x=function(t){i(0,t)},v=function(t){i(1,t)},m=function(t){var e=t.key;r.events.trigger(function(){g.filter(e),g.redrawGroup()})};return r.override(g,"filter",function(t){return arguments.length?g._filter(r.filters.TwoDimensionalFilter(t)):g._filter()}),g.rows=function(t){return arguments.length?(l=t,g):l},g.rowOrdering=function(t){return arguments.length?(u=t,g):u},g.cols=function(t){return arguments.length?(o=t,g):o},g.colOrdering=function(t){return arguments.length?(c=t,g):c},g._doRender=function(){return g.resetSvg(),a=g.svg().append("g").attr("class","heatmap").attr("transform","translate("+g.margins().left+","+g.margins().top+")"),g._doRedraw()},g._doRedraw=function(){var t=g.data(),e=g.rows()||t.map(g.valueAccessor()),n=g.cols()||t.map(g.keyAccessor());u&&(e=e.sort(u)),c&&(n=n.sort(c)),e=d.domain(e),n=s.domain(n);var i=e.domain().length,o=n.domain().length,l=Math.floor(g.effectiveWidth()/o),p=Math.floor(g.effectiveHeight()/i);n.rangeRound([0,g.effectiveWidth()]),e.rangeRound([g.effectiveHeight(),0]);var y=a.selectAll("g.box-group").data(g.data(),function(t,e){return g.keyAccessor()(t,e)+"\0"+g.valueAccessor()(t,e)});y.exit().remove();var x=y.enter().append("g").attr("class","box-group");x.append("rect").attr("class","heat-box").attr("fill","white").attr("x",function(t,e){return n(g.keyAccessor()(t,e))}).attr("y",function(t,n){return e(g.valueAccessor()(t,n))}).on("click",g.boxOnClick()),g.renderTitle()&&(x.append("title"),y.select("title").text(g.title())),y=x.merge(y),r.transition(y.select("rect"),g.transitionDuration(),g.transitionDelay()).attr("x",function(t,e){return n(g.keyAccessor()(t,e))}).attr("y",function(t,n){return e(g.valueAccessor()(t,n))}).attr("rx",f).attr("ry",h).attr("fill",g.getColor).attr("width",l).attr("height",p);var v=a.select("g.cols");v.empty()&&(v=a.append("g").attr("class","cols axis"));var m=v.selectAll("text").data(n.domain());m.exit().remove(),m=m.enter().append("text").attr("x",function(t){return n(t)+l/2}).style("text-anchor","middle").attr("y",g.effectiveHeight()).attr("dy",12).on("click",g.xAxisOnClick()).text(g.colsLabel()).merge(m),r.transition(m,g.transitionDuration(),g.transitionDelay()).text(g.colsLabel()).attr("x",function(t){return n(t)+l/2}).attr("y",g.effectiveHeight());var A=a.select("g.rows");A.empty()&&(A=a.append("g").attr("class","rows axis"));var b=A.selectAll("text").data(e.domain());return b.exit().remove(),b=b.enter().append("text").style("text-anchor","end").attr("x",0).attr("dx",-2).attr("y",function(t){return e(t)+p/2}).attr("dy",6).on("click",g.yAxisOnClick()).text(g.rowsLabel()).merge(b),r.transition(b,g.transitionDuration(),g.transitionDelay()).text(g.rowsLabel()).attr("y",function(t){return e(t)+p/2}),g.hasFilter()?g.selectAll("g.box-group").each(function(t){g.isSelectedNode(t)?g.highlightSelected(this):g.fadeDeselected(this)}):g.selectAll("g.box-group").each(function(){g.resetHighlight(this)}),g},g.boxOnClick=function(t){return arguments.length?(m=t,g):m},g.xAxisOnClick=function(t){return arguments.length?(x=t,g):x},g.yAxisOnClick=function(t){return arguments.length?(v=t,g):v},g.xBorderRadius=function(t){return arguments.length?(f=t,g):f},g.yBorderRadius=function(t){return arguments.length?(h=t,g):h},g.isSelectedNode=function(t){return g.hasFilter(t.key)},g.anchor(e,n)},function(){function e(t){return[0,t.length-1]}function n(e){return[t.quantile(e,.25),t.quantile(e,.5),t.quantile(e,.75)]}t.box=function(){function i(e){e.each(function(e,n){e=e.map(s).sort(t.ascending);var r,i,b=t.select(this),_=e.length;if(0!==_){var k=e.quartiles=f(e),D=d&&d.call(this,e,n),C=D&&D.map(function(t){return e[t]}),M=D?t.range(0,D[0]).concat(t.range(D[1]+1,_)):t.range(_);m?(r=e[0],i=e[_-1]):(r=e[D[0]],i=e[D[1]]);var w=t.range(D[0],D[1]+1),L=t.scaleLinear().domain(u&&u.call(this,e,n)||[r,i]).range([o,0]),E=this.__chart__||t.scaleLinear().domain([0,1/0]).range(L.range());this.__chart__=L;var R=b.selectAll("line.center").data(C?[C]:[]);R.enter().insert("line","rect").attr("class","center").attr("x1",a/2).attr("y1",function(t){return E(t[0])}).attr("x2",a/2).attr("y2",function(t){return E(t[1])}).style("opacity",1e-6).transition().duration(l).delay(c).style("opacity",1).attr("y1",function(t){return L(t[0])}).attr("y2",function(t){return L(t[1])}),R.transition().duration(l).delay(c).style("opacity",1).attr("x1",a/2).attr("x2",a/2).attr("y1",function(t){return L(t[0])}).attr("y2",function(t){return L(t[1])}),R.exit().transition().duration(l).delay(c).style("opacity",1e-6).attr("y1",function(t){return L(t[0])}).attr("y2",function(t){return L(t[1])}).remove();var S=b.selectAll("rect.box").data([k]);S.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(t){return E(t[2])}).attr("width",a).attr("height",function(t){return E(t[0])-E(t[2])}).style("fill-opacity",g?.1:1).transition().duration(l).delay(c).attr("y",function(t){return L(t[2])}).attr("height",function(t){return L(t[0])-L(t[2])}),S.transition().duration(l).delay(c).attr("width",a).attr("y",function(t){return L(t[2])}).attr("height",function(t){return L(t[0])-L(t[2])});var O=b.selectAll("line.median").data([k[1]]);O.enter().append("line").attr("class","median").attr("x1",0).attr("y1",E).attr("x2",a).attr("y2",E).transition().duration(l).delay(c).attr("y1",L).attr("y2",L),O.transition().duration(l).delay(c).attr("x1",0).attr("x2",a).attr("y1",L).attr("y2",L);var B=b.selectAll("line.whisker").data(C||[]);if(B.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",E).attr("x2",a).attr("y2",E).style("opacity",1e-6).transition().duration(l).delay(c).attr("y1",L).attr("y2",L).style("opacity",1),B.transition().duration(l).delay(c).attr("x1",0).attr("x2",a).attr("y1",L).attr("y2",L).style("opacity",1),B.exit().transition().duration(l).delay(c).attr("y1",L).attr("y2",L).style("opacity",1e-6).remove(),m){var F=A?"outlierBold":"outlier",T=A?3:5,N=A?function(){return Math.floor(Math.random()*(a*x)+1+(a-a*x)/2)}:function(){return a/2},H=b.selectAll("circle."+F).data(M,Number);H.enter().insert("circle","text").attr("class",F).attr("r",T).attr("cx",N).attr("cy",function(t){return E(e[t])}).style("opacity",1e-6).transition().duration(l).delay(c).attr("cy",function(t){return L(e[t])}).style("opacity",.6),v&&(H.selectAll("title").remove(),H.append("title").text(function(t){return e[t]})),H.transition().duration(l).delay(c).attr("cx",N).attr("cy",function(t){return L(e[t])}).style("opacity",.6),H.exit().transition().duration(l).delay(c).attr("cy",0).style("opacity",1e-6).remove()}if(g){var P=b.selectAll("circle.data").data(w);P.enter().insert("circle","text").attr("class","data").attr("r",p).attr("cx",function(){return Math.floor(Math.random()*(a*x)+1+(a-a*x)/2)}).attr("cy",function(t){return E(e[t])}).style("opacity",1e-6).transition().duration(l).delay(c).attr("cy",function(t){return L(e[t])}).style("opacity",y),v&&(P.selectAll("title").remove(),P.append("title").text(function(t){return e[t]})),P.transition().duration(l).delay(c).attr("cx",function(){return Math.floor(Math.random()*(a*x)+1+(a-a*x)/2)}).attr("cy",function(t){return L(e[t])}).style("opacity",y),P.exit().transition().duration(l).delay(c).attr("cy",0).style("opacity",1e-6).remove()}var G=h||L.tickFormat(8),z=b.selectAll("text.box").data(k);z.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(t,e){return 1&e?6:-6}).attr("x",function(t,e){return 1&e?a:0}).attr("y",E).attr("text-anchor",function(t,e){return 1&e?"start":"end"}).text(G).transition().duration(l).delay(c).attr("y",L),z.transition().duration(l).delay(c).text(G).attr("x",function(t,e){return 1&e?a:0}).attr("y",L);var I=b.selectAll("text.whisker").data(C||[]);I.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",a).attr("y",E).text(G).style("opacity",1e-6).transition().duration(l).delay(c).attr("y",L).style("opacity",1),I.transition().duration(l).delay(c).text(G).attr("x",a).attr("y",L).style("opacity",1),I.exit().transition().duration(l).delay(c).attr("y",L).style("opacity",1e-6).remove(),delete e.quartiles}}),t.timerFlush()}var a=1,o=1,l=0,c=0,u=null,s=Number,d=e,f=n,h=null,g=!1,p=3,y=.3,x=.8,v=!1,m=!0,A=!1;return i.width=function(t){return arguments.length?(a=t,i):a},i.height=function(t){return arguments.length?(o=t,i):o},i.tickFormat=function(t){return arguments.length?(h=t,i):h},i.showOutliers=function(t){return arguments.length?(m=t,i):m},i.boldOutlier=function(t){return arguments.length?(A=t,i):A},i.renderDataPoints=function(t){return arguments.length?(g=t,i):g},i.renderTitle=function(t){return arguments.length?(v=t,i):v},i.dataOpacity=function(t){return arguments.length?(y=t,i):y},i.dataWidthPortion=function(t){return arguments.length?(x=t,i):x},i.duration=function(t){return arguments.length?(l=t,i):l},i.domain=function(t){return arguments.length?(u=null===t?t:"function"==typeof t?t:r.utils.constant(t),i):u},i.value=function(t){return arguments.length?(s=t,i):s},i.whiskers=function(t){return arguments.length?(d=t,i):d},i.quartiles=function(t){return arguments.length?(f=t,i):f},i}}(),r.boxPlot=function(e,n){function i(){return t.min(l.data(),function(e){return t.min(l.valueAccessor()(e))})}function a(){return t.max(l.data(),function(e){return t.max(l.valueAccessor()(e))})}function o(){return(a()-i())/l.effectiveHeight()}var l=r.coordinateGridMixin({}),c=function(t){return function(e){var n=e.quartiles[0],r=e.quartiles[2],i=(r-n)*t,a=-1,o=e.length;do{++a}while(e[a]<n-i);do{--o}while(e[o]>r+i);return[a,o]}}(1.5),u=t.box(),s=null,d=!1,f=.3,h=.8,g=!0,p=!1,y=8,x=function(t,e){return l.isOrdinal()?l.x().bandwidth():t/(1+l.boxPadding())/e};l.x(t.scaleBand()),l.xUnits(r.units.ordinal),l.data(function(t){return t.all().map(function(t){return t.map=function(e){return e.call(t,t)},t}).filter(function(t){return 0!==l.valueAccessor()(t).length})}),l.boxPadding=l._rangeBandPadding,l.boxPadding(.8),l.outerPadding=l._outerRangeBandPadding,l.outerPadding(.5),l.boxWidth=function(t){return arguments.length?(x="function"==typeof t?t:r.utils.constant(t),l):x};var v=function(t,e){return"translate("+l.x()(l.keyAccessor()(t,e))+", 0)"};return l._preprocessData=function(){l.elasticX()&&l.x().domain([])},l.plotData=function(){var e=x(l.effectiveWidth(),l.xUnitCount());u.whiskers(c).width(e).height(l.effectiveHeight()).value(l.valueAccessor()).domain(l.y().domain()).duration(l.transitionDuration()).tickFormat(s).renderDataPoints(d).dataOpacity(f).dataWidthPortion(h).renderTitle(l.renderTitle()).showOutliers(g).boldOutlier(p);var n=l.chartBodyG().selectAll("g.box").data(l.data(),l.keyAccessor());!function(e){r.transition(e,l.transitionDuration(),l.transitionDelay()).attr("transform",v).call(u).each(function(e){var n=l.getColor(e,0);t.select(this).select("rect.box").attr("fill",n),t.select(this).selectAll("circle.data").attr("fill",n)})}(function(t){var e=t.enter().append("g");return e.attr("class","box").attr("transform",v).call(u).on("click",function(t){l.filter(l.keyAccessor()(t)),l.redrawGroup()}),e.merge(t)}(n)),function(t){t.exit().remove().call(u)}(n),l.fadeDeselectedArea(l.filter())},l.fadeDeselectedArea=function(t){if(l.hasFilter())if(l.isOrdinal())l.g().selectAll("g.box").each(function(t){l.isSelectedNode(t)?l.highlightSelected(this):l.fadeDeselected(this)});else{if(!l.brushOn()&&!l.parentBrushOn())return;var e=t[0],n=t[1],r=l.keyAccessor();l.g().selectAll("g.box").each(function(t){var i=r(t);i<e||i>=n?l.fadeDeselected(this):l.highlightSelected(this)})}else l.g().selectAll("g.box").each(function(){l.resetHighlight(this)})},l.isSelectedNode=function(t){return l.hasFilter(l.keyAccessor()(t))},l.yAxisMin=function(){var t=y*o();return r.utils.subtract(i()-t,l.yAxisPadding())},l.yAxisMax=function(){var t=y*o();return r.utils.add(a()+t,l.yAxisPadding())},l.tickFormat=function(t){return arguments.length?(s=t,l):s},l.yRangePadding=function(t){return arguments.length?(y=t,l):y},l.renderDataPoints=function(t){return arguments.length?(d=t,l):d},l.dataOpacity=function(t){return arguments.length?(f=t,l):f},l.dataWidthPortion=function(t){return arguments.length?(h=t,l):h},l.showOutliers=function(t){return arguments.length?(g=t,l):g},l.boldOutlier=function(t){return arguments.length?(p=t,l):p},l.anchor(e,n)},r.selectMenu=function(e,n){function i(e,n){var r,i=t.event.target;if(i.selectedOptions){r=Array.prototype.slice.call(i.selectedOptions).map(function(t){return t.value})}else{r=[].slice.call(t.event.target.options).filter(function(t){return t.selected}).map(function(t){return t.value})}1===r.length&&""===r[0]?r=s||null:u||1!==r.length||(r=r[0]),l.onChange(r)}var a,o="dc-select-option",l=r.baseMixin({}),c="Select all",u=!1,s=null,d=null,f=function(t,e){return l.keyAccessor()(t)>l.keyAccessor()(e)?1:l.keyAccessor()(e)>l.keyAccessor()(t)?-1:0},h=function(t){return l.valueAccessor()(t)>0};l.data(function(t){return t.all().filter(h)}),l._doRender=function(){return l.select("select").remove(),(a=l.root().append("select").classed("dc-select-menu",!0)).append("option").text(c).attr("value",""),l._doRedraw(),l};var g=window.navigator.userAgent;return g.indexOf("Trident/")>0&&-1===g.indexOf("MSIE")&&(l.redraw=l.render),l._doRedraw=function(){return u?a.attr("multiple",!0):a.attr("multiple",null),null!==d?a.attr("size",d):a.attr("size",null),function(){var t=a.selectAll("option."+o).data(l.data(),function(t){return l.keyAccessor()(t)});t.exit().remove(),t.enter().append("option").classed(o,!0).attr("value",function(t){return l.keyAccessor()(t)}).merge(t).text(l.title()),a.selectAll("option."+o).sort(f),a.on("change",i)}(),l.hasFilter()&&u?a.selectAll("option").property("selected",function(t){return void 0!==t&&l.filters().indexOf(String(l.keyAccessor()(t)))>=0}):l.hasFilter()?a.property("value",l.filter()):a.property("value",""),l},l.onChange=function(t){t&&u?l.replaceFilter([t]):t?l.replaceFilter(t):l.filterAll(),r.events.trigger(function(){l.redrawGroup()})},l.order=function(t){return arguments.length?(f=t,l):f},l.promptText=function(t){return arguments.length?(c=t,l):c},l.filterDisplayed=function(t){return arguments.length?(h=t,l):h},l.multiple=function(t){return arguments.length?(u=t,l):u},l.promptValue=function(t){return arguments.length?(s=t,l):s},l.numberVisible=function(t){return arguments.length?(d=t,l):d},l.size=r.logger.deprecate(l.numberVisible,"selectMenu.size is ambiguous - use numberVisible instead"),l.anchor(e,n)},r.textFilterWidget=function(t,e){var n=r.baseMixin({}),i=function(t){return t.toLowerCase()},a=function(t){return t=i(t),function(e){return-1!==i(e).indexOf(t)}},o="search";return n.group(function(){throw"the group function on textFilterWidget should never be called, please report the issue"}),n._doRender=function(){n.select("input").remove();return n.root().append("input").classed("dc-text-filter-input",!0).on("input",function(){n.dimension().filterFunction(a(this.value)),r.events.trigger(function(){r.redrawAll()},r.constants.EVENT_DELAY)}),n._doRedraw(),n},n._doRedraw=function(){return n.root().selectAll("input").attr("placeholder",o),n},n.normalize=function(t){return arguments.length?(i=t,n):i},n.placeHolder=function(t){return arguments.length?(o=t,n):o},n.filterFunctionFactory=function(t){return arguments.length?(a=t,n):a},n.anchor(t,e)},r.cboxMenu=function(e,n){function i(e,n){var r;t.select(t.event.target).datum()?(r=t.select(this).selectAll("input").filter(function(t){if(t)return this.checked}).nodes().map(function(t){return t.value}),u||1!==r.length||(r=r[0])):r=d||null,l.onChange(r)}var a,o="dc-cbox-item",l=r.baseMixin({}),c="Select all",u=!1,s="radio",d=null,f=Math.floor(1e5*Math.random())+1,h=function(t,e){return l.keyAccessor()(t)>l.keyAccessor()(e)?1:l.keyAccessor()(e)>l.keyAccessor()(t)?-1:0},g=function(t){return l.valueAccessor()(t)>0};return l.data(function(t){return t.all().filter(g)}),l._doRender=function(){return l._doRedraw()},l._doRedraw=function(){return l.select("ul").remove(),a=l.root().append("ul").classed("dc-cbox-group",!0),function(){var t=a.selectAll("li."+o).data(l.data(),function(t){return l.keyAccessor()(t)});if(t.exit().remove(),(t=t.enter().append("li").classed(o,!0).merge(t)).append("input").attr("type",s).attr("value",function(t){return l.keyAccessor()(t)}).attr("name","domain_"+f).attr("id",function(t,e){return"input_"+f+"_"+e}),t.append("label").attr("for",function(t,e){return"input_"+f+"_"+e}).text(l.title()),u)a.append("li").append("input").attr("type","reset").text(c).on("click",i);else{var e=a.append("li");e.append("input").attr("type",s).attr("value",d).attr("name","domain_"+f).attr("id",function(t,e){return"input_"+f+"_all"}).property("checked",!0),e.append("label").attr("for",function(t,e){return"input_"+f+"_all"}).text(c)}a.selectAll("li."+o).sort(h),a.on("change",i)}(),l.hasFilter()&&u?a.selectAll("input").property("checked",function(t){return t&&l.filters().indexOf(String(l.keyAccessor()(t)))>=0||!1}):l.hasFilter()&&a.selectAll("input").property("checked",function(t){return!!t&&l.keyAccessor()(t)===l.filter()}),l},l.onChange=function(t){t&&u?l.replaceFilter([t]):t?l.replaceFilter(t):l.filterAll(),r.events.trigger(function(){l.redrawGroup()})},l.order=function(t){return arguments.length?(h=t,l):h},l.promptText=function(t){return arguments.length?(c=t,l):c},l.filterDisplayed=function(t){return arguments.length?(g=t,l):g},l.multiple=function(t){return arguments.length?(u=t,s=u?"checkbox":"radio",l):u},l.promptValue=function(t){return arguments.length?(d=t,l):d},l.anchor(e,n)},r.abstractBubbleChart=r.bubbleMixin,r.baseChart=r.baseMixin,r.capped=r.capMixin,r.colorChart=r.colorMixin,r.coordinateGridChart=r.coordinateGridMixin,r.marginable=r.marginMixin,r.stackableChart=r.stackMixin,r.d3=t,r.crossfilter=e,r}if("function"==typeof define&&define.amd)define(["d3","crossfilter2"],t);else if("object"==typeof module&&module.exports){var e=require("d3"),n=require("crossfilter2");"function"!=typeof n&&(n=n.crossfilter),module.exports=t(e,n)}else this.dc=t(d3,crossfilter)}();
//# sourceMappingURL=dc.min.js.map